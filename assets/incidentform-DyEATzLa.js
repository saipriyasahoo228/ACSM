import{j as e,r as d}from"./index-o2L8XDyT.js";import{f,B as w,C as L,T as k,a as R,b as V,c as g,d as o,e as F}from"./TableRow-LAUI0Gax.js";import{C as H}from"./CardHeader-D_cDB1rm.js";import{B as h}from"./Modal-DwRNYzNZ.js";import{C as M}from"./CardContent-y0pBm6N5.js";import{T as s}from"./TextField-CqNGJcSQ.js";import{I as j,S as B}from"./Search-PceUVjHr.js";import{S as I}from"./Stack-CC4QwJVT.js";import{I as y}from"./IconButton-BsqESdtl.js";import{E as P}from"./Edit-CN0OCPew.js";import{D as z}from"./Delete-eFAeh1u5.js";import{D as N,a as O,b as U,c as q}from"./DialogTitle--WyXxo1x.js";import{M as $}from"./MenuItem-DD5KVmZ_.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-E3CKQj5Y.js";import"./TransitionGroupContext-Dcol0yJe.js";import"./Transition-Dl-PhuCn.js";import"./InputLabel-DN3vyk4T.js";import"./Select-BAX3otil.js";import"./index-DMX1Y610.js";import"./isMuiElement-Dd7xnTXW.js";import"./dividerClasses-AJeEqX5c.js";const G=f(e.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6z"})),J=f(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),K=f(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),Q=["Near-Miss","First-Aid","Lost Time Injury (LTI)","Dangerous Occurrence"],fe=()=>{const[v,b]=d.useState(!1),[r,x]=d.useState([]),[m,S]=d.useState(""),[c,p]=d.useState(null),[n,i]=d.useState({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),C=(t=null)=>{if(t)i(t),p(t.id);else{const l=`INC-${(r.length+1).toString().padStart(3,"0")}`;i({id:l,category:"",date:"",time:"",location:"",description:"",attachments:null}),p(null)}b(!0)},u=()=>{b(!1),i({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),p(null)},a=t=>{const{name:l,value:T}=t.target;i({...n,[l]:T})},D=t=>{i({...n,attachments:t.target.files})},E=()=>{if(!n.category||!n.date||!n.time||!n.location){alert("Please fill all required fields.");return}x(c?r.map(t=>t.id===c?n:t):[...r,n]),u()},W=t=>{window.confirm("Are you sure you want to delete this incident?")&&x(r.filter(l=>l.id!==t))},A=r.filter(t=>t.id.toLowerCase().includes(m.toLowerCase())||t.category.toLowerCase().includes(m.toLowerCase()));return e.jsxs(w,{sx:{p:3},children:[e.jsxs(L,{sx:{borderLeft:"6px solid #0A3A6E",borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(H,{title:e.jsx(k,{variant:"h6",sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident Reporting & Management"}),action:e.jsx(h,{variant:"contained",sx:{bgcolor:"#0A3A6E"},onClick:()=>C(),children:"+ Report Incident"})}),e.jsxs(M,{children:[e.jsx(s,{placeholder:"Search by Incident ID or Category",fullWidth:!0,value:m,onChange:t=>S(t.target.value),InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(B,{})})},sx:{mb:2}}),e.jsxs(R,{children:[e.jsx(V,{sx:{background:"#E3F2FD"},children:e.jsxs(g,{children:[e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident ID"}),e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Category"}),e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Date"}),e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Time"}),e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Location"}),e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Actions"})]})}),e.jsx(F,{children:A.length>0?A.map(t=>e.jsxs(g,{children:[e.jsx(o,{children:t.id}),e.jsx(o,{children:t.category}),e.jsx(o,{children:t.date}),e.jsx(o,{children:t.time}),e.jsx(o,{children:t.location}),e.jsx(o,{children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(y,{size:"small",color:"primary",onClick:()=>C(t),children:e.jsx(P,{})}),e.jsx(y,{size:"small",color:"error",onClick:()=>W(t.id),children:e.jsx(z,{})})]})})]},t.id)):e.jsx(g,{children:e.jsx(o,{colSpan:6,align:"center",children:"No incidents reported."})})})]})]})]}),e.jsxs(N,{open:v,onClose:u,fullWidth:!0,maxWidth:"sm",children:[e.jsx(O,{sx:{bgcolor:"#0A3A6E",color:"#fff",fontWeight:"bold",textAlign:"center"},children:c?"Update Incident":"Report New Incident"}),e.jsx(U,{sx:{mt:2,background:"linear-gradient(135deg, #f5f9ff, #edf3ff)",borderRadius:"8px"},children:e.jsxs(I,{spacing:2,sx:{mt:2},children:[e.jsx(s,{label:"Incident ID",name:"id",value:n.id,fullWidth:!0,disabled:!0}),e.jsx(s,{select:!0,label:"Category",name:"category",value:n.category,onChange:a,fullWidth:!0,children:Q.map(t=>e.jsx($,{value:t,children:t},t))}),e.jsx(s,{label:"Date",name:"date",type:"date",value:n.date,onChange:a,fullWidth:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(J,{})})}}),e.jsx(s,{label:"Time",name:"time",type:"time",value:n.time,onChange:a,fullWidth:!0}),e.jsx(s,{label:"Location",name:"location",value:n.location,onChange:a,fullWidth:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(K,{})})}}),e.jsx(s,{label:"Description",name:"description",value:n.description,onChange:a,multiline:!0,rows:3,fullWidth:!0}),e.jsxs(h,{variant:"outlined",component:"label",startIcon:e.jsx(G,{}),sx:{alignSelf:"flex-start"},children:["Upload Attachments",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:D})]})]})}),e.jsxs(q,{children:[e.jsx(h,{onClick:u,children:"Cancel"}),e.jsx(h,{onClick:E,variant:"contained",sx:{bgcolor:"#0A3A6E"},children:c?"Update Incident":"Submit Incident"})]})]})]})};export{fe as default};
