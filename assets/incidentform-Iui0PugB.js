import{r as d,j as e}from"./index-DeCPM1YT.js";import{B as v,C as w,T as L,a as k,b as R,c as j,d as n,e as F}from"./TableRow-Cd9L6edy.js";import{C as B}from"./CardHeader-BFOCdbev.js";import{B as m}from"./Button-i0LS_vGv.js";import{C as P}from"./CardContent-DuW-pjc9.js";import{T as r}from"./TextField-RAEaaxPg.js";import{I as g}from"./InputAdornment-DyuYPr7S.js";import{S as M}from"./Search-C-psGFWq.js";import{S as I}from"./Stack-Cb_zqfoO.js";import{I as C}from"./IconButton-oK9S63L7.js";import{E as N}from"./Edit-DGiN9sfY.js";import{D as O}from"./Delete-PXtfudQB.js";import{D as U,a as z,b as H,c as q}from"./DialogTitle-D5MRwTrG.js";import{C as $}from"./Close-DenZmEgU.js";import{M as G}from"./MenuItem-BBKtsJ_f.js";import{C as J}from"./CalendarToday-CE1zo_3e.js";import{L as K}from"./LocationOn-BaBUObEn.js";import{A as Q}from"./AttachFile-BXFyFfNt.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./InputLabel-uQorTdpH.js";import"./Select-B0BFEktc.js";import"./index-DeXogL32.js";import"./Modal-CUDL2x5c.js";import"./Transition-B84HZYJ-.js";import"./isMuiElement-DPWNH1dL.js";import"./dividerClasses-ifTG4Um1.js";const V=["Near-Miss","First-Aid","Lost Time Injury (LTI)","Dangerous Occurrence"],De=()=>{const[y,h]=d.useState(!1),[i,x]=d.useState([]),[p,D]=d.useState(""),[c,u]=d.useState(null),[o,s]=d.useState({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),b=(t=null)=>{if(t)s(t),u(t.id);else{const l=`INC-${(i.length+1).toString().padStart(3,"0")}`;s({id:l,category:"",date:"",time:"",location:"",description:"",attachments:null}),u(null)}h(!0)},f=()=>{h(!1),s({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),u(null)},a=t=>{const{name:l,value:T}=t.target;s({...o,[l]:T})},S=t=>{s({...o,attachments:t.target.files})},E=()=>{if(!o.category||!o.date||!o.time||!o.location){alert("Please fill all required fields.");return}x(c?i.map(t=>t.id===c?o:t):[...i,o]),f()},W=t=>{window.confirm("Are you sure you want to delete this incident?")&&x(i.filter(l=>l.id!==t))},A=i.filter(t=>t.id.toLowerCase().includes(p.toLowerCase())||t.category.toLowerCase().includes(p.toLowerCase()));return e.jsxs(v,{sx:{p:3},children:[e.jsxs(w,{sx:{borderLeft:"6px solid #0A3A6E",borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(B,{title:e.jsx(L,{variant:"h6",sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident Reporting & Management"}),action:e.jsx(m,{variant:"contained",sx:{bgcolor:"#0A3A6E"},onClick:()=>b(),children:"+ Report Incident"})}),e.jsxs(P,{children:[e.jsx(r,{placeholder:"Search by Incident ID or Category",fullWidth:!0,value:p,onChange:t=>D(t.target.value),InputProps:{startAdornment:e.jsx(g,{position:"start",children:e.jsx(M,{})})},sx:{mb:2}}),e.jsxs(k,{children:[e.jsx(R,{sx:{background:"#E3F2FD"},children:e.jsxs(j,{children:[e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident ID"}),e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Category"}),e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Date"}),e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Time"}),e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Location"}),e.jsx(n,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Actions"})]})}),e.jsx(F,{children:A.length>0?A.map(t=>e.jsxs(j,{children:[e.jsx(n,{children:t.id}),e.jsx(n,{children:t.category}),e.jsx(n,{children:t.date}),e.jsx(n,{children:t.time}),e.jsx(n,{children:t.location}),e.jsx(n,{children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(C,{size:"small",color:"primary",onClick:()=>b(t),children:e.jsx(N,{})}),e.jsx(C,{size:"small",color:"error",onClick:()=>W(t.id),children:e.jsx(O,{})})]})})]},t.id)):e.jsx(j,{children:e.jsx(n,{colSpan:6,align:"center",children:"No incidents reported."})})})]})]})]}),e.jsxs(U,{open:y,onClose:f,fullWidth:!0,maxWidth:"sm",children:[e.jsxs(z,{sx:{bgcolor:"#0A3A6E",color:"#fff",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c?"Update Incident":"Report New Incident",e.jsx(C,{onClick:()=>h(!1),sx:{color:"#fff"},children:e.jsx($,{})})]}),e.jsx(H,{sx:{mt:2,borderRadius:"8px"},children:e.jsxs(I,{spacing:2,sx:{mt:2},children:[e.jsx(r,{label:"Incident ID",name:"id",value:o.id,fullWidth:!0,disabled:!0}),e.jsx(r,{select:!0,label:"Category",name:"category",value:o.category,onChange:a,fullWidth:!0,children:V.map(t=>e.jsx(G,{value:t,children:t},t))}),e.jsx(r,{label:"Date",name:"date",type:"date",value:o.date,onChange:a,fullWidth:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(g,{position:"start",children:e.jsx(J,{})})}}),e.jsx(r,{label:"Time",name:"time",type:"time",value:o.time,onChange:a,fullWidth:!0}),e.jsx(r,{label:"Location",name:"location",value:o.location,onChange:a,fullWidth:!0,InputProps:{startAdornment:e.jsx(g,{position:"start",children:e.jsx(K,{})})}}),e.jsx(r,{label:"Description",name:"description",value:o.description,onChange:a,multiline:!0,rows:3,fullWidth:!0}),e.jsxs(m,{variant:"outlined",component:"label",startIcon:e.jsx(Q,{}),sx:{alignSelf:"flex-start"},children:["Upload Attachments",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:S})]})]})}),e.jsxs(q,{children:[e.jsx(m,{onClick:f,children:"Cancel"}),e.jsx(m,{onClick:E,variant:"contained",sx:{bgcolor:"#0A3A6E"},children:c?"Update Incident":"Submit Incident"})]})]})]})};export{De as default};
