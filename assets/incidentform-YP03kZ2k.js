import{j as e,r as d}from"./index-lQRenEQZ.js";import{f as b,B as w,C as L,T as k,a as V,b as F,c as g,d as s,e as H}from"./TableRow-DOrBXlsl.js";import{C as M}from"./CardHeader-CVfYXhzf.js";import{B as x}from"./Modal-B5kKy10H.js";import{C as R}from"./CardContent-B105ua6l.js";import{T as r}from"./TextField-DSnqcXEl.js";import{I as f,S as B}from"./Search-B-bLmECG.js";import{S as P}from"./Stack-CbGqEpRV.js";import{I as v}from"./IconButton-T04wkc8J.js";import{E as z}from"./Edit-C-2-cLNF.js";import{D as N}from"./Delete-CGINWn67.js";import{D as O,a as U,b as G,c as q}from"./DialogTitle-BY4vkXbS.js";import{G as o}from"./Grid-DAMVHerN.js";import{M as $}from"./MenuItem-C9agow_O.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-DbGEVCCx.js";import"./TransitionGroupContext-Cr6fGhL9.js";import"./Transition-CaP-LOaf.js";import"./InputLabel-D6fBawzD.js";import"./Select-BG3pRAtK.js";import"./index-BGy4LR6Y.js";import"./isMuiElement-CkiPPDrS.js";import"./dividerClasses-HdBjWpbl.js";const J=b(e.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6z"})),K=b(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),Q=b(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),X=["Near-Miss","First-Aid","Lost Time Injury (LTI)","Dangerous Occurrence"],Ce=()=>{const[y,C]=d.useState(!1),[i,m]=d.useState([]),[u,S]=d.useState(""),[h,p]=d.useState(null),[n,a]=d.useState({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),A=(t=null)=>{if(t)a(t),p(t.id);else{const c=`INC-${(i.length+1).toString().padStart(3,"0")}`;a({...n,id:c}),p(null)}C(!0)},j=()=>{C(!1),a({id:"",category:"",date:"",time:"",location:"",description:"",attachments:null}),p(null)},l=t=>{const{name:c,value:T}=t.target;a({...n,[c]:T})},D=t=>{a({...n,attachments:t.target.files})},E=()=>{if(!n.category||!n.date||!n.time||!n.location){alert("Please fill all required fields.");return}m(h?i.map(t=>t.id===h?n:t):[...i,n]),j()},W=t=>{window.confirm("Are you sure you want to delete this incident?")&&m(i.filter(c=>c.id!==t))},I=i.filter(t=>t.id.toLowerCase().includes(u.toLowerCase())||t.category.toLowerCase().includes(u.toLowerCase()));return e.jsxs(w,{sx:{p:3},children:[e.jsxs(L,{sx:{borderLeft:"6px solid #0A3A6E",borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(M,{title:e.jsx(k,{variant:"h6",sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident Reporting & Management"}),action:e.jsx(x,{variant:"contained",sx:{bgcolor:"#0A3A6E"},onClick:()=>A(),children:"+ Report Incident"})}),e.jsxs(R,{children:[e.jsx(r,{placeholder:"Search by Incident ID or Category",fullWidth:!0,value:u,onChange:t=>S(t.target.value),InputProps:{startAdornment:e.jsx(f,{position:"start",children:e.jsx(B,{})})},sx:{mb:2}}),e.jsxs(V,{children:[e.jsx(F,{sx:{background:"#E3F2FD"},children:e.jsxs(g,{children:[e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Incident ID"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Category"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Date"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Time"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Location"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Actions"})]})}),e.jsx(H,{children:I.length>0?I.map(t=>e.jsxs(g,{children:[e.jsx(s,{children:t.id}),e.jsx(s,{children:t.category}),e.jsx(s,{children:t.date}),e.jsx(s,{children:t.time}),e.jsx(s,{children:t.location}),e.jsx(s,{children:e.jsxs(P,{direction:"row",spacing:1,children:[e.jsx(v,{size:"small",color:"primary",onClick:()=>A(t),children:e.jsx(z,{})}),e.jsx(v,{size:"small",color:"error",onClick:()=>W(t.id),children:e.jsx(N,{})})]})})]},t.id)):e.jsx(g,{children:e.jsx(s,{colSpan:6,align:"center",children:"No incidents reported."})})})]})]})]}),e.jsxs(O,{open:y,onClose:j,fullWidth:!0,maxWidth:"md",children:[e.jsx(U,{sx:{bgcolor:"#0A3A6E",color:"#fff",fontWeight:"bold"},children:h?"Update Incident":"Report New Incident"}),e.jsx(G,{sx:{mt:2},children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:6,children:e.jsx(r,{label:"Incident ID",name:"id",value:n.id,fullWidth:!0,disabled:!0})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(r,{select:!0,label:"Category",name:"category",value:n.category,onChange:l,fullWidth:!0,children:X.map(t=>e.jsx($,{value:t,children:t},t))})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(r,{label:"Date",name:"date",type:"date",value:n.date,onChange:l,fullWidth:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(f,{position:"start",children:e.jsx(K,{})})}})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(r,{label:"Time",name:"time",type:"time",value:n.time,onChange:l,fullWidth:!0})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(r,{label:"Location",name:"location",value:n.location,onChange:l,fullWidth:!0,InputProps:{startAdornment:e.jsx(f,{position:"start",children:e.jsx(Q,{})})}})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(r,{label:"Description",name:"description",value:n.description,onChange:l,multiline:!0,rows:3,fullWidth:!0})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(x,{variant:"outlined",component:"label",startIcon:e.jsx(J,{}),children:["Upload Attachments",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:D})]})})]})}),e.jsxs(q,{children:[e.jsx(x,{onClick:j,children:"Cancel"}),e.jsx(x,{onClick:E,variant:"contained",sx:{bgcolor:"#0A3A6E"},children:h?"Update Incident":"Submit Incident"})]})]})]})};export{Ce as default};
