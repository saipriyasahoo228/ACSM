import{r as b,j as e}from"./index-DeCPM1YT.js";import{E as S}from"./jspdf.es.min-zcs_wkLJ.js";import"./jspdf.plugin.autotable-D1pcuC_d.js";import{u as g,w}from"./xlsx-CQK9p-uP.js";import{B as M,C as p,T as o,a as B,b as I,c as y,d as s,e as H}from"./TableRow-Cd9L6edy.js";import{G as m}from"./Grid-DCJmtdp8.js";import{S as k}from"./Stack-Cb_zqfoO.js";import{T as j}from"./TextField-RAEaaxPg.js";import{M as d}from"./MenuItem-BBKtsJ_f.js";import{B as C}from"./Button-i0LS_vGv.js";import{C as _}from"./CardHeader-BFOCdbev.js";import{C as L}from"./CardContent-DuW-pjc9.js";import{C as G}from"./Chip-D7PQ2JTP.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./isMuiElement-DPWNH1dL.js";import"./InputLabel-uQorTdpH.js";import"./Select-B0BFEktc.js";import"./index-DeXogL32.js";import"./Modal-CUDL2x5c.js";import"./Transition-B84HZYJ-.js";import"./dividerClasses-ifTG4Um1.js";function de(){const l=[{id:"REQ-001",permitType:"Hot Work",location:"Boiler Room 1",selectedWorkers:["Ravi Kumar","Anita Sharma"],status:"Pending",submissionDate:"2025-10-10 09:00 AM",expiryDate:"2025-10-10 17:00 PM"},{id:"REQ-002",permitType:"Confined Space",location:"Tank 3",selectedWorkers:["Vikas Singh"],status:"Approved",submissionDate:"2025-10-09 10:30 AM",expiryDate:"2025-10-09 18:00 PM"},{id:"REQ-003",permitType:"Electrical",location:"Generator Room",selectedWorkers:["Ravi Kumar"],status:"Issued",submissionDate:"2025-10-08 08:45 AM",expiryDate:"2025-10-08 16:45 PM"},{id:"REQ-004",permitType:"Hot Work",location:"Boiler Room 2",selectedWorkers:["Anita Sharma"],status:"Rejected",submissionDate:"2025-10-07 09:15 AM",expiryDate:"2025-10-07 17:15 PM"}],v=["Hot Work","Confined Space","Electrical","Work at Height"],T=["Pending","Approved","Issued","Rejected"],f=["Boiler Room 1","Boiler Room 2","Tank 3","Generator Room"],E=["Ravi Kumar","Anita Sharma","Vikas Singh"],[i,F]=b.useState({permitType:"",status:"",location:"",worker:""}),u=(t,c)=>{F(r=>({...r,[t]:c}))},h=b.useMemo(()=>l.filter(t=>(!i.permitType||t.permitType===i.permitType)&&(!i.status||t.status===i.status)&&(!i.location||t.location===i.location)&&(!i.worker||t.selectedWorkers.includes(i.worker))),[i]),x=b.useMemo(()=>{const t=l.length,c=l.filter(n=>n.status==="Pending").length,r=l.filter(n=>n.status==="Approved").length,a=l.filter(n=>n.status==="Issued").length,R=l.filter(n=>n.status==="Rejected").length,W=v.map(n=>({type:n,count:l.filter(P=>P.permitType===n).length}));return{total:t,pending:c,approved:r,issued:a,rejected:R,byType:W}},[l]),D=()=>{const t=new S,c=["ID","Permit Type","Location","Workers","Status","Submission Date","Expiry"],r=h.map(a=>[a.id,a.permitType,a.location,a.selectedWorkers.join(", "),a.status,a.submissionDate,a.expiryDate]);t.autoTable({head:[c],body:r}),t.save("permit_history.pdf")},A=()=>{const t=g.json_to_sheet(h.map(r=>({ID:r.id,"Permit Type":r.permitType,Location:r.location,Workers:r.selectedWorkers.join(", "),Status:r.status,"Submission Date":r.submissionDate,Expiry:r.expiryDate}))),c=g.book_new();g.book_append_sheet(c,t,"PermitHistory"),w(c,"permit_history.xlsx")};return e.jsxs(M,{sx:{p:3},children:[e.jsxs(m,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(m,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(p,{sx:{textAlign:"center",p:2,backgroundColor:"#E3F2FD"},children:[e.jsx(o,{variant:"h6",children:x.total}),e.jsx(o,{variant:"body2",children:"Total Permits"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(p,{sx:{textAlign:"center",p:2,backgroundColor:"#FFF4E5"},children:[e.jsx(o,{variant:"h6",children:x.pending}),e.jsx(o,{variant:"body2",children:"Pending"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(p,{sx:{textAlign:"center",p:2,backgroundColor:"#E7F6EC"},children:[e.jsx(o,{variant:"h6",children:x.approved}),e.jsx(o,{variant:"body2",children:"Approved"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(p,{sx:{textAlign:"center",p:2,backgroundColor:"#D1F2FF"},children:[e.jsx(o,{variant:"h6",children:x.issued}),e.jsx(o,{variant:"body2",children:"Issued"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(p,{sx:{textAlign:"center",p:2,backgroundColor:"#FFECEC"},children:[e.jsx(o,{variant:"h6",children:x.rejected}),e.jsx(o,{variant:"body2",children:"Rejected"})]})})]}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[e.jsxs(j,{select:!0,label:"Permit Type",value:i.permitType,onChange:t=>u("permitType",t.target.value),sx:{minWidth:150},children:[e.jsx(d,{value:"",children:"All"}),v.map(t=>e.jsx(d,{value:t,children:t},t))]}),e.jsxs(j,{select:!0,label:"Status",value:i.status,onChange:t=>u("status",t.target.value),sx:{minWidth:150},children:[e.jsx(d,{value:"",children:"All"}),T.map(t=>e.jsx(d,{value:t,children:t},t))]}),e.jsxs(j,{select:!0,label:"Location",value:i.location,onChange:t=>u("location",t.target.value),sx:{minWidth:150},children:[e.jsx(d,{value:"",children:"All"}),f.map(t=>e.jsx(d,{value:t,children:t},t))]}),e.jsxs(j,{select:!0,label:"Worker",value:i.worker,onChange:t=>u("worker",t.target.value),sx:{minWidth:150},children:[e.jsx(d,{value:"",children:"All"}),E.map(t=>e.jsx(d,{value:t,children:t},t))]})]}),e.jsxs(k,{direction:"row",spacing:2,sx:{mb:2},children:[e.jsx(C,{variant:"contained",color:"primary",onClick:D,children:"Export PDF"}),e.jsx(C,{variant:"contained",color:"success",onClick:A,children:"Export Excel"})]}),e.jsxs(p,{sx:{borderLeft:"6px solid #082A52",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",borderRadius:2},children:[e.jsx(_,{title:e.jsx(o,{variant:"h6",children:"Permit History"})}),e.jsx(L,{children:e.jsxs(B,{children:[e.jsx(I,{sx:{backgroundColor:"#E3F2FD"},children:e.jsxs(y,{children:[e.jsx(s,{children:"ID"}),e.jsx(s,{children:"Permit Type"}),e.jsx(s,{children:"Location"}),e.jsx(s,{children:"Workers"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Submission Date"}),e.jsx(s,{children:"Expiry"})]})}),e.jsxs(H,{children:[h.map(t=>e.jsxs(y,{children:[e.jsx(s,{children:t.id}),e.jsx(s,{children:t.permitType}),e.jsx(s,{children:t.location}),e.jsx(s,{children:t.selectedWorkers.join(", ")}),e.jsx(s,{children:e.jsx(G,{label:t.status,size:"small",sx:{backgroundColor:t.status==="Pending"?"#FFF4E5":t.status==="Approved"?"#E7F6EC":t.status==="Issued"?"#D1F2FF":"#FFECEC",color:t.status==="Pending"?"#F57C00":t.status==="Approved"?"#2E7D32":t.status==="Issued"?"#0277BD":"#C62828",fontWeight:600}})}),e.jsx(s,{children:t.submissionDate}),e.jsx(s,{children:t.expiryDate})]},t.id)),h.length===0&&e.jsx(y,{children:e.jsx(s,{colSpan:7,align:"center",sx:{py:4},children:"No permits found with current filters."})})]})]})})]})]})}export{de as default};
