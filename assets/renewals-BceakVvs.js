import{r as m,j as e}from"./index-DeCPM1YT.js";import{B as P,C as S,T as R,a as k,b as N,c as x,d as l,e as O}from"./TableRow-Cd9L6edy.js";import{C as W}from"./CardHeader-BFOCdbev.js";import{B as h}from"./Button-i0LS_vGv.js";import{A as B}from"./Add-C6u5IBut.js";import{C as M}from"./CardContent-DuW-pjc9.js";import{C as L}from"./Chip-D7PQ2JTP.js";import{S as g}from"./Stack-Cb_zqfoO.js";import{T as v}from"./Tooltip-yN68D0Y6.js";import{I as j}from"./IconButton-oK9S63L7.js";import{E as H}from"./Edit-DGiN9sfY.js";import{D as G}from"./Delete-PXtfudQB.js";import{D as $,a as F,b as K,c as q}from"./DialogTitle-D5MRwTrG.js";import{C as z}from"./Close-DenZmEgU.js";import{T as s}from"./TextField-RAEaaxPg.js";import{A as C}from"./Autocomplete-N4kXr_Yu.js";import{M as i}from"./MenuItem-BBKtsJ_f.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./index-DeXogL32.js";import"./Popper-CBRnQHX0.js";import"./Modal-CUDL2x5c.js";import"./Transition-B84HZYJ-.js";import"./Select-B0BFEktc.js";import"./InputLabel-uQorTdpH.js";import"./isMuiElement-DPWNH1dL.js";import"./Close-BFPS2qWf.js";import"./dividerClasses-ifTG4Um1.js";const J=[{id:"PPE-001",name:"Safety Helmet",type:"PPE",category:"Head Protection",renewal:12},{id:"PPE-002",name:"Acid-Resistant Gloves",type:"PPE",category:"Hand Protection",renewal:6},{id:"TOOL-001",name:"Tool Kit",type:"Tool",category:"Hand Tools",renewal:24},{id:"TOOL-002",name:"Multimeter",type:"Tool",category:"Electrical Tools",renewal:18}],b=[{id:"EMP-001",name:"Rajesh Kumar",department:"Welding"},{id:"EMP-002",name:"Priya Sharma",department:"Electrical"},{id:"EMP-003",name:"Amit Patel",department:"Mechanical"}];function be(){const[o,u]=m.useState([]),[E,d]=m.useState(!1),[c,f]=m.useState(null),[a,n]=m.useState({renewalId:"",employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""});m.useEffect(()=>{if(!c){const t=`REN-${String(o.length+1).padStart(3,"0")}`;n(r=>({...r,renewalId:t}))}},[o,c]);const I=()=>{f(null),n({renewalId:`REN-${String(o.length+1).padStart(3,"0")}`,employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""}),d(!0)},w=t=>{f(t),n(o[t]),d(!0)},T=t=>{if(window.confirm("Are you sure you want to delete this renewal record?")){const r=[...o];r.splice(t,1),u(r)}},D=()=>{if(!a.employeeName||!a.itemName){alert("Please fill all required fields");return}const t={...a};if(c!==null){const r=[...o];r[c]=t,u(r)}else u([...o,t]);d(!1)},A=t=>{switch(t){case"Renewed":return"success";case"Pending":return"warning";case"Overdue":return"error";default:return"default"}},y=a.itemType?J.filter(t=>t.type===a.itemType):[];return e.jsxs(P,{sx:{p:3},children:[e.jsxs(S,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(W,{title:e.jsx(R,{variant:"h6",sx:{color:"#0A3A6E",fontWeight:600},children:"PPE & Tool Renewals Management"}),action:e.jsx(h,{variant:"contained",startIcon:e.jsx(B,{}),onClick:I,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:"Add Renewal"})}),e.jsx(M,{children:e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(x,{sx:{backgroundColor:"#E3EAFD"},children:[e.jsx(l,{children:"Renewal ID"}),e.jsx(l,{children:"Employee"}),e.jsx(l,{children:"Item Type"}),e.jsx(l,{children:"Item Name"}),e.jsx(l,{children:"Issue Date"}),e.jsx(l,{children:"Expiry Date"}),e.jsx(l,{children:"Condition"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Approved By"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(O,{children:[o.map((t,r)=>e.jsxs(x,{children:[e.jsx(l,{children:t.renewalId}),e.jsx(l,{children:t.employeeName}),e.jsx(l,{children:t.itemType}),e.jsx(l,{children:t.itemName}),e.jsx(l,{children:t.issueDate}),e.jsx(l,{children:t.expiryDate}),e.jsx(l,{children:t.condition}),e.jsx(l,{children:e.jsx(L,{label:t.renewalStatus||"N/A",color:A(t.renewalStatus),size:"small"})}),e.jsx(l,{children:t.approvedBy}),e.jsx(l,{children:e.jsxs(g,{direction:"row",spacing:1,children:[e.jsx(v,{title:"Edit",children:e.jsx(j,{color:"primary",onClick:()=>w(r),children:e.jsx(H,{})})}),e.jsx(v,{title:"Delete",children:e.jsx(j,{color:"error",onClick:()=>T(r),children:e.jsx(G,{})})})]})})]},r)),o.length===0&&e.jsx(x,{children:e.jsx(l,{colSpan:10,align:"center",children:"No renewal records yet."})})]})]})})]}),e.jsxs($,{open:E,onClose:()=>d(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(F,{sx:{backgroundColor:"#0A3A6E",color:"white",py:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c!==null?"Edit Renewal Record":"Add New Renewal Record",e.jsx(j,{onClick:()=>d(!1),sx:{color:"#fff"},children:e.jsx(z,{})})]}),e.jsx(K,{sx:{p:3},children:e.jsxs(g,{spacing:2,sx:{mt:2},children:[e.jsx(s,{fullWidth:!0,label:"Renewal ID",value:a.renewalId,disabled:!0}),e.jsx(C,{options:b,getOptionLabel:t=>`${t.name} (${t.department})`,value:b.find(t=>t.id===a.employeeId)||null,onChange:(t,r)=>{n(p=>({...p,employeeId:(r==null?void 0:r.id)||"",employeeName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(s,{...t,label:"Employee",fullWidth:!0})}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Item Type",value:a.itemType,onChange:t=>n({...a,itemType:t.target.value,itemId:"",itemName:""}),children:[e.jsx(i,{value:"PPE",children:"PPE"}),e.jsx(i,{value:"Tool",children:"Tool"}),e.jsx(i,{value:"Safety Gear",children:"Safety Gear"}),e.jsx(i,{value:"Dress",children:"Dress"})]}),e.jsx(C,{options:y,getOptionLabel:t=>t.name,value:y.find(t=>t.id===a.itemId)||null,onChange:(t,r)=>{n(p=>({...p,itemId:(r==null?void 0:r.id)||"",itemName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(s,{...t,label:"Item Name",fullWidth:!0})}),e.jsx(s,{type:"date",fullWidth:!0,label:"Issue Date",InputLabelProps:{shrink:!0},value:a.issueDate,onChange:t=>n({...a,issueDate:t.target.value})}),e.jsx(s,{type:"date",fullWidth:!0,label:"Expiry Date",InputLabelProps:{shrink:!0},value:a.expiryDate,onChange:t=>n({...a,expiryDate:t.target.value})}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Condition Before Renewal",value:a.condition,onChange:t=>n({...a,condition:t.target.value}),children:[e.jsx(i,{value:"Good",children:"Good"}),e.jsx(i,{value:"Damaged",children:"Damaged"}),e.jsx(i,{value:"Expired",children:"Expired"})]}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Renewal Status",value:a.renewalStatus,onChange:t=>n({...a,renewalStatus:t.target.value}),children:[e.jsx(i,{value:"Pending",children:"Pending"}),e.jsx(i,{value:"Renewed",children:"Renewed"}),e.jsx(i,{value:"Overdue",children:"Overdue"})]}),e.jsx(s,{type:"date",fullWidth:!0,label:"Renewed On",InputLabelProps:{shrink:!0},value:a.renewedOn,onChange:t=>n({...a,renewedOn:t.target.value})}),e.jsx(s,{fullWidth:!0,label:"Approved By",value:a.approvedBy,onChange:t=>n({...a,approvedBy:t.target.value})}),e.jsx(s,{fullWidth:!0,label:"Remarks",multiline:!0,rows:3,value:a.remarks,onChange:t=>n({...a,remarks:t.target.value})})]})}),e.jsxs(q,{sx:{p:2},children:[e.jsx(h,{onClick:()=>d(!1),color:"error",children:"Cancel"}),e.jsx(h,{variant:"contained",onClick:D,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:c!==null?"Save Changes":"Add Renewal"})]})]})]})}export{be as default};
