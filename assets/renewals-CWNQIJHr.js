import{r as u,j as e}from"./index-78vIXnNX.js";import{B as P,C as S,T as R,a as k,b as N,c as O,d as h,e as l,f as W}from"./TableRow-Bh4s7eKd.js";import{C as B,S as y}from"./Stack-SA5ch7KR.js";import{B as x}from"./Modal-BRuT0w2r.js";import{A as M}from"./Add-B0X4t8Dt.js";import{C as L}from"./Chip-CV93Yug4.js";import{T as f}from"./Tooltip-D5obH6AR.js";import{I as v,D as H}from"./Delete-De6SPuXf.js";import{E as G}from"./Edit-BTYUVQFF.js";import{D as $,a as F,b as K,c as q}from"./DialogTitle-Cr0WkrxD.js";import{T as s}from"./TextField-D_h3ch71.js";import{A as C}from"./Autocomplete-5kGlPUL5.js";import{M as i}from"./MenuItem-EDr2Hmyh.js";import"./clsx-B-dksMZM.js";import"./Transition-DLvuwqKz.js";import"./index-Cf5oalkp.js";import"./Popper-t28B73-l.js";import"./Select-BDRxS8K1.js";import"./InputLabel-D2cET7_l.js";import"./isMuiElement-CcGzOGYR.js";import"./Close-CRcyvVRX.js";const z=[{id:"PPE-001",name:"Safety Helmet",type:"PPE",category:"Head Protection",renewal:12},{id:"PPE-002",name:"Acid-Resistant Gloves",type:"PPE",category:"Hand Protection",renewal:6},{id:"TOOL-001",name:"Tool Kit",type:"Tool",category:"Hand Tools",renewal:24},{id:"TOOL-002",name:"Multimeter",type:"Tool",category:"Electrical Tools",renewal:18}],E=[{id:"EMP-001",name:"Rajesh Kumar",department:"Welding"},{id:"EMP-002",name:"Priya Sharma",department:"Electrical"},{id:"EMP-003",name:"Amit Patel",department:"Mechanical"}];function pe(){const[o,m]=u.useState([]),[b,c]=u.useState(!1),[d,j]=u.useState(null),[a,n]=u.useState({renewalId:"",employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""});u.useEffect(()=>{if(!d){const t=`REN-${String(o.length+1).padStart(3,"0")}`;n(r=>({...r,renewalId:t}))}},[o,d]);const I=()=>{j(null),n({renewalId:`REN-${String(o.length+1).padStart(3,"0")}`,employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""}),c(!0)},w=t=>{j(t),n(o[t]),c(!0)},T=t=>{if(window.confirm("Are you sure you want to delete this renewal record?")){const r=[...o];r.splice(t,1),m(r)}},D=()=>{if(!a.employeeName||!a.itemName){alert("Please fill all required fields");return}const t={...a};if(d!==null){const r=[...o];r[d]=t,m(r)}else m([...o,t]);c(!1)},A=t=>{switch(t){case"Renewed":return"success";case"Pending":return"warning";case"Overdue":return"error";default:return"default"}},g=a.itemType?z.filter(t=>t.type===a.itemType):[];return e.jsxs(P,{sx:{p:3},children:[e.jsxs(S,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(B,{title:e.jsx(R,{variant:"h6",sx:{color:"#0A3A6E",fontWeight:600},children:"PPE & Tool Renewals Management"}),action:e.jsx(x,{variant:"contained",startIcon:e.jsx(M,{}),onClick:I,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:"Add Renewal"})}),e.jsx(k,{children:e.jsxs(N,{children:[e.jsx(O,{children:e.jsxs(h,{sx:{backgroundColor:"#E3EAFD"},children:[e.jsx(l,{children:"Renewal ID"}),e.jsx(l,{children:"Employee"}),e.jsx(l,{children:"Item Type"}),e.jsx(l,{children:"Item Name"}),e.jsx(l,{children:"Issue Date"}),e.jsx(l,{children:"Expiry Date"}),e.jsx(l,{children:"Condition"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Approved By"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(W,{children:[o.map((t,r)=>e.jsxs(h,{children:[e.jsx(l,{children:t.renewalId}),e.jsx(l,{children:t.employeeName}),e.jsx(l,{children:t.itemType}),e.jsx(l,{children:t.itemName}),e.jsx(l,{children:t.issueDate}),e.jsx(l,{children:t.expiryDate}),e.jsx(l,{children:t.condition}),e.jsx(l,{children:e.jsx(L,{label:t.renewalStatus||"N/A",color:A(t.renewalStatus),size:"small"})}),e.jsx(l,{children:t.approvedBy}),e.jsx(l,{children:e.jsxs(y,{direction:"row",spacing:1,children:[e.jsx(f,{title:"Edit",children:e.jsx(v,{color:"primary",onClick:()=>w(r),children:e.jsx(G,{})})}),e.jsx(f,{title:"Delete",children:e.jsx(v,{color:"error",onClick:()=>T(r),children:e.jsx(H,{})})})]})})]},r)),o.length===0&&e.jsx(h,{children:e.jsx(l,{colSpan:10,align:"center",children:"No renewal records yet."})})]})]})})]}),e.jsxs($,{open:b,onClose:()=>c(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(F,{sx:{backgroundColor:"#0A3A6E",color:"white",py:2},children:d!==null?"Edit Renewal Record":"Add New Renewal Record"}),e.jsx(K,{sx:{p:3},children:e.jsxs(y,{spacing:2,children:[e.jsx(s,{fullWidth:!0,label:"Renewal ID",value:a.renewalId,disabled:!0}),e.jsx(C,{options:E,getOptionLabel:t=>`${t.name} (${t.department})`,value:E.find(t=>t.id===a.employeeId)||null,onChange:(t,r)=>{n(p=>({...p,employeeId:(r==null?void 0:r.id)||"",employeeName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(s,{...t,label:"Employee",fullWidth:!0})}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Item Type",value:a.itemType,onChange:t=>n({...a,itemType:t.target.value,itemId:"",itemName:""}),children:[e.jsx(i,{value:"PPE",children:"PPE"}),e.jsx(i,{value:"Tool",children:"Tool"}),e.jsx(i,{value:"Safety Gear",children:"Safety Gear"}),e.jsx(i,{value:"Dress",children:"Dress"})]}),e.jsx(C,{options:g,getOptionLabel:t=>t.name,value:g.find(t=>t.id===a.itemId)||null,onChange:(t,r)=>{n(p=>({...p,itemId:(r==null?void 0:r.id)||"",itemName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(s,{...t,label:"Item Name",fullWidth:!0})}),e.jsx(s,{type:"date",fullWidth:!0,label:"Issue Date",InputLabelProps:{shrink:!0},value:a.issueDate,onChange:t=>n({...a,issueDate:t.target.value})}),e.jsx(s,{type:"date",fullWidth:!0,label:"Expiry Date",InputLabelProps:{shrink:!0},value:a.expiryDate,onChange:t=>n({...a,expiryDate:t.target.value})}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Condition Before Renewal",value:a.condition,onChange:t=>n({...a,condition:t.target.value}),children:[e.jsx(i,{value:"Good",children:"Good"}),e.jsx(i,{value:"Damaged",children:"Damaged"}),e.jsx(i,{value:"Expired",children:"Expired"})]}),e.jsxs(s,{select:!0,fullWidth:!0,label:"Renewal Status",value:a.renewalStatus,onChange:t=>n({...a,renewalStatus:t.target.value}),children:[e.jsx(i,{value:"Pending",children:"Pending"}),e.jsx(i,{value:"Renewed",children:"Renewed"}),e.jsx(i,{value:"Overdue",children:"Overdue"})]}),e.jsx(s,{type:"date",fullWidth:!0,label:"Renewed On",InputLabelProps:{shrink:!0},value:a.renewedOn,onChange:t=>n({...a,renewedOn:t.target.value})}),e.jsx(s,{fullWidth:!0,label:"Approved By",value:a.approvedBy,onChange:t=>n({...a,approvedBy:t.target.value})}),e.jsx(s,{fullWidth:!0,label:"Remarks",multiline:!0,rows:3,value:a.remarks,onChange:t=>n({...a,remarks:t.target.value})})]})}),e.jsxs(q,{sx:{p:2},children:[e.jsx(x,{onClick:()=>c(!1),color:"error",children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:D,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:d!==null?"Save Changes":"Add Renewal"})]})]})]})}export{pe as default};
