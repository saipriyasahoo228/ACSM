import{r as m,j as e}from"./index-lQRenEQZ.js";import{B as P,C as S,T as R,a as k,b as N,c as h,d as l,e as O}from"./TableRow-DOrBXlsl.js";import{C as W}from"./CardHeader-CVfYXhzf.js";import{B as x}from"./Modal-B5kKy10H.js";import{A as B}from"./Add-Benailh8.js";import{C as M}from"./CardContent-B105ua6l.js";import{C as L}from"./Chip-Ds2TcdWV.js";import{S as y}from"./Stack-CbGqEpRV.js";import{T as f}from"./Tooltip-C8n5BAva.js";import{I as v}from"./IconButton-T04wkc8J.js";import{E as H}from"./Edit-C-2-cLNF.js";import{D as G}from"./Delete-CGINWn67.js";import{D as $,a as F,b as K,c as q}from"./DialogTitle-BY4vkXbS.js";import{T as i}from"./TextField-DSnqcXEl.js";import{A as C}from"./Autocomplete-aFZyaRv4.js";import{M as s}from"./MenuItem-C9agow_O.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-DbGEVCCx.js";import"./TransitionGroupContext-Cr6fGhL9.js";import"./Transition-CaP-LOaf.js";import"./index-BGy4LR6Y.js";import"./Popper-C5zl9EtA.js";import"./Select-BG3pRAtK.js";import"./InputLabel-D6fBawzD.js";import"./isMuiElement-CkiPPDrS.js";import"./Close-DkDoMZWw.js";import"./dividerClasses-HdBjWpbl.js";const z=[{id:"PPE-001",name:"Safety Helmet",type:"PPE",category:"Head Protection",renewal:12},{id:"PPE-002",name:"Acid-Resistant Gloves",type:"PPE",category:"Hand Protection",renewal:6},{id:"TOOL-001",name:"Tool Kit",type:"Tool",category:"Hand Tools",renewal:24},{id:"TOOL-002",name:"Multimeter",type:"Tool",category:"Electrical Tools",renewal:18}],E=[{id:"EMP-001",name:"Rajesh Kumar",department:"Welding"},{id:"EMP-002",name:"Priya Sharma",department:"Electrical"},{id:"EMP-003",name:"Amit Patel",department:"Mechanical"}];function fe(){const[o,u]=m.useState([]),[b,c]=m.useState(!1),[d,j]=m.useState(null),[a,n]=m.useState({renewalId:"",employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""});m.useEffect(()=>{if(!d){const t=`REN-${String(o.length+1).padStart(3,"0")}`;n(r=>({...r,renewalId:t}))}},[o,d]);const I=()=>{j(null),n({renewalId:`REN-${String(o.length+1).padStart(3,"0")}`,employeeId:"",employeeName:"",itemType:"",itemId:"",itemName:"",issueDate:"",expiryDate:"",condition:"",renewalStatus:"",renewedOn:"",approvedBy:"",remarks:""}),c(!0)},w=t=>{j(t),n(o[t]),c(!0)},T=t=>{if(window.confirm("Are you sure you want to delete this renewal record?")){const r=[...o];r.splice(t,1),u(r)}},D=()=>{if(!a.employeeName||!a.itemName){alert("Please fill all required fields");return}const t={...a};if(d!==null){const r=[...o];r[d]=t,u(r)}else u([...o,t]);c(!1)},A=t=>{switch(t){case"Renewed":return"success";case"Pending":return"warning";case"Overdue":return"error";default:return"default"}},g=a.itemType?z.filter(t=>t.type===a.itemType):[];return e.jsxs(P,{sx:{p:3},children:[e.jsxs(S,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(W,{title:e.jsx(R,{variant:"h6",sx:{color:"#0A3A6E",fontWeight:600},children:"PPE & Tool Renewals Management"}),action:e.jsx(x,{variant:"contained",startIcon:e.jsx(B,{}),onClick:I,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:"Add Renewal"})}),e.jsx(M,{children:e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(h,{sx:{backgroundColor:"#E3EAFD"},children:[e.jsx(l,{children:"Renewal ID"}),e.jsx(l,{children:"Employee"}),e.jsx(l,{children:"Item Type"}),e.jsx(l,{children:"Item Name"}),e.jsx(l,{children:"Issue Date"}),e.jsx(l,{children:"Expiry Date"}),e.jsx(l,{children:"Condition"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Approved By"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(O,{children:[o.map((t,r)=>e.jsxs(h,{children:[e.jsx(l,{children:t.renewalId}),e.jsx(l,{children:t.employeeName}),e.jsx(l,{children:t.itemType}),e.jsx(l,{children:t.itemName}),e.jsx(l,{children:t.issueDate}),e.jsx(l,{children:t.expiryDate}),e.jsx(l,{children:t.condition}),e.jsx(l,{children:e.jsx(L,{label:t.renewalStatus||"N/A",color:A(t.renewalStatus),size:"small"})}),e.jsx(l,{children:t.approvedBy}),e.jsx(l,{children:e.jsxs(y,{direction:"row",spacing:1,children:[e.jsx(f,{title:"Edit",children:e.jsx(v,{color:"primary",onClick:()=>w(r),children:e.jsx(H,{})})}),e.jsx(f,{title:"Delete",children:e.jsx(v,{color:"error",onClick:()=>T(r),children:e.jsx(G,{})})})]})})]},r)),o.length===0&&e.jsx(h,{children:e.jsx(l,{colSpan:10,align:"center",children:"No renewal records yet."})})]})]})})]}),e.jsxs($,{open:b,onClose:()=>c(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(F,{sx:{backgroundColor:"#0A3A6E",color:"white",py:2},children:d!==null?"Edit Renewal Record":"Add New Renewal Record"}),e.jsx(K,{sx:{p:3},children:e.jsxs(y,{spacing:2,sx:{mt:2},children:[e.jsx(i,{fullWidth:!0,label:"Renewal ID",value:a.renewalId,disabled:!0}),e.jsx(C,{options:E,getOptionLabel:t=>`${t.name} (${t.department})`,value:E.find(t=>t.id===a.employeeId)||null,onChange:(t,r)=>{n(p=>({...p,employeeId:(r==null?void 0:r.id)||"",employeeName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(i,{...t,label:"Employee",fullWidth:!0})}),e.jsxs(i,{select:!0,fullWidth:!0,label:"Item Type",value:a.itemType,onChange:t=>n({...a,itemType:t.target.value,itemId:"",itemName:""}),children:[e.jsx(s,{value:"PPE",children:"PPE"}),e.jsx(s,{value:"Tool",children:"Tool"}),e.jsx(s,{value:"Safety Gear",children:"Safety Gear"}),e.jsx(s,{value:"Dress",children:"Dress"})]}),e.jsx(C,{options:g,getOptionLabel:t=>t.name,value:g.find(t=>t.id===a.itemId)||null,onChange:(t,r)=>{n(p=>({...p,itemId:(r==null?void 0:r.id)||"",itemName:(r==null?void 0:r.name)||""}))},renderInput:t=>e.jsx(i,{...t,label:"Item Name",fullWidth:!0})}),e.jsx(i,{type:"date",fullWidth:!0,label:"Issue Date",InputLabelProps:{shrink:!0},value:a.issueDate,onChange:t=>n({...a,issueDate:t.target.value})}),e.jsx(i,{type:"date",fullWidth:!0,label:"Expiry Date",InputLabelProps:{shrink:!0},value:a.expiryDate,onChange:t=>n({...a,expiryDate:t.target.value})}),e.jsxs(i,{select:!0,fullWidth:!0,label:"Condition Before Renewal",value:a.condition,onChange:t=>n({...a,condition:t.target.value}),children:[e.jsx(s,{value:"Good",children:"Good"}),e.jsx(s,{value:"Damaged",children:"Damaged"}),e.jsx(s,{value:"Expired",children:"Expired"})]}),e.jsxs(i,{select:!0,fullWidth:!0,label:"Renewal Status",value:a.renewalStatus,onChange:t=>n({...a,renewalStatus:t.target.value}),children:[e.jsx(s,{value:"Pending",children:"Pending"}),e.jsx(s,{value:"Renewed",children:"Renewed"}),e.jsx(s,{value:"Overdue",children:"Overdue"})]}),e.jsx(i,{type:"date",fullWidth:!0,label:"Renewed On",InputLabelProps:{shrink:!0},value:a.renewedOn,onChange:t=>n({...a,renewedOn:t.target.value})}),e.jsx(i,{fullWidth:!0,label:"Approved By",value:a.approvedBy,onChange:t=>n({...a,approvedBy:t.target.value})}),e.jsx(i,{fullWidth:!0,label:"Remarks",multiline:!0,rows:3,value:a.remarks,onChange:t=>n({...a,remarks:t.target.value})})]})}),e.jsxs(q,{sx:{p:2},children:[e.jsx(x,{onClick:()=>c(!1),color:"error",children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:D,sx:{backgroundColor:"#0A3A6E","&:hover":{backgroundColor:"#082A52"}},children:d!==null?"Save Changes":"Add Renewal"})]})]})]})}export{fe as default};
