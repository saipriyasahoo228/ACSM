import{r,j as e,R as H}from"./index-DeCPM1YT.js";import{B as m,C as N,T as u,a as A,b as S,c as a,d as s,e as I}from"./TableRow-Cd9L6edy.js";import{C as O}from"./CardHeader-BFOCdbev.js";import{B as g}from"./Button-i0LS_vGv.js";import{C as $}from"./CardContent-DuW-pjc9.js";import{T as o}from"./TextField-RAEaaxPg.js";import{I as y}from"./InputAdornment-DyuYPr7S.js";import{S as D}from"./Search-C-psGFWq.js";import{I as P}from"./IconButton-oK9S63L7.js";import{E as z}from"./ExpandLess-BUkRJSnp.js";import{E as G}from"./ExpandMore-BjBxeS2K.js";import{C as q}from"./Collapse-CI6k5Tak.js";import{D as K,a as V,b as Y,c as J}from"./DialogTitle-D5MRwTrG.js";import{C as Q}from"./Close-DenZmEgU.js";import{G as l}from"./Grid-DCJmtdp8.js";import{M as U}from"./MenuItem-BBKtsJ_f.js";import{S as X}from"./Stack-Cb_zqfoO.js";import{C as Z}from"./Checkbox-B-amFoMf.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./InputLabel-uQorTdpH.js";import"./Select-B0BFEktc.js";import"./index-DeXogL32.js";import"./Modal-CUDL2x5c.js";import"./Transition-B84HZYJ-.js";import"./isMuiElement-DPWNH1dL.js";import"./dividerClasses-ifTG4Um1.js";import"./SwitchBase-DtxWgrp7.js";const We=()=>{const[W,j]=r.useState(!1),[c,v]=r.useState([]),[x,b]=r.useState(""),[p,C]=r.useState([]),[T,B]=r.useState([]),[i,E]=r.useState({tbtId:"",project:"",date:"",topic:"",discussionPoints:""}),w=["Building A Extension","Road Construction","Pipeline Installation"],k=[{id:"EMP001",name:"Ravi Kumar",designation:"Welder",department:"Fabrication"},{id:"EMP002",name:"Sita Das",designation:"Supervisor",department:"Civil"},{id:"EMP003",name:"Amit Roy",designation:"Electrician",department:"Electrical"},{id:"EMP004",name:"Priya Sharma",designation:"Safety Officer",department:"Safety"},{id:"EMP005",name:"Rahul Verma",designation:"Fitter",department:"Mechanical"}].filter(t=>t.name.toLowerCase().includes(x.toLowerCase())||t.id.toLowerCase().includes(x.toLowerCase())),R=()=>{const t=`TBT-${(c.length+1).toString().padStart(3,"0")}`;E({...i,tbtId:t}),j(!0)},f=()=>{j(!1),C([])},L=t=>{C(n=>n.some(d=>d.id===t.id)?n.filter(d=>d.id!==t.id):[...n,t])},h=t=>{E({...i,[t.target.name]:t.target.value})},M=()=>{if(!i.project||!i.topic||p.length===0){alert("Please fill all required fields and select at least one attendee.");return}const t={...i,attendees:p};v([...c,t]),f()},F=t=>{B(n=>n.includes(t)?n.filter(d=>d!==t):[...n,t])};return e.jsxs(m,{sx:{p:3},children:[e.jsxs(N,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(O,{title:e.jsx(u,{variant:"h6",sx:{color:"#0A3A6E",fontWeight:"bold"},children:"Toolbox Talk (TBT) Creation & Scheduling"}),action:e.jsx(g,{variant:"contained",onClick:R,sx:{bgcolor:"#0A3A6E"},children:"+ Create New TBT"})}),e.jsxs($,{children:[e.jsx(o,{placeholder:"Search Here",fullWidth:!0,value:x,onChange:t=>b(t.target.value),InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(D,{})})},sx:{mb:2}}),e.jsxs(A,{children:[e.jsx(S,{children:e.jsxs(a,{sx:{background:"#E3F2FD"},children:[e.jsx(s,{}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"TBT ID"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Project"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Date"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Topic"})]})}),e.jsxs(I,{children:[c.map(t=>e.jsxs(H.Fragment,{children:[e.jsxs(a,{children:[e.jsx(s,{children:e.jsx(P,{size:"small",onClick:()=>F(t.tbtId),children:T.includes(t.tbtId)?e.jsx(z,{}):e.jsx(G,{})})}),e.jsx(s,{children:t.tbtId}),e.jsx(s,{children:t.project}),e.jsx(s,{children:t.date}),e.jsx(s,{children:t.topic})]}),e.jsx(a,{children:e.jsx(s,{colSpan:5,sx:{p:0,border:"none"},children:e.jsx(q,{in:T.includes(t.tbtId),timeout:"auto",unmountOnExit:!0,children:e.jsxs(m,{sx:{margin:1},children:[e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:"Attendees"}),e.jsxs(A,{size:"small",children:[e.jsx(S,{children:e.jsxs(a,{sx:{background:"#E8F5E9"},children:[e.jsx(s,{children:"Employee ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Designation"}),e.jsx(s,{children:"Department"})]})}),e.jsx(I,{children:t.attendees.map(n=>e.jsxs(a,{children:[e.jsx(s,{children:n.id}),e.jsx(s,{children:n.name}),e.jsx(s,{children:n.designation}),e.jsx(s,{children:n.department})]},n.id))})]})]})})})})]},t.tbtId)),c.length===0&&e.jsx(a,{children:e.jsx(s,{colSpan:5,align:"center",children:"No TBT records found."})})]})]})]})]}),e.jsxs(K,{open:W,onClose:f,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(V,{sx:{bgcolor:"#0A3A6E",color:"#fff",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Create New Toolbox Talk",e.jsx(P,{onClick:()=>j(!1),sx:{color:"#fff"},children:e.jsx(Q,{})})]}),e.jsxs(Y,{sx:{mt:2},children:[e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{label:"TBT ID",name:"tbtId",value:i.tbtId,fullWidth:!0,disabled:!0})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{select:!0,label:"Project",name:"project",value:i.project,onChange:h,fullWidth:!0,children:w.map(t=>e.jsx(U,{value:t,children:t},t))})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{label:"Date",name:"date",type:"date",value:i.date,onChange:h,fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{label:"Topic",name:"topic",value:i.topic,onChange:h,fullWidth:!0})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(o,{label:"Discussion Points",name:"discussionPoints",multiline:!0,rows:3,value:i.discussionPoints,onChange:h,fullWidth:!0})})]}),e.jsxs(m,{sx:{mt:3,maxHeight:250,overflowY:"auto",border:"1px solid #ccc",borderRadius:1,p:1},children:[e.jsx(u,{variant:"subtitle1",sx:{color:"#0A3A6E",fontWeight:"bold",mb:1},children:"Select Attendees"}),e.jsx(o,{placeholder:"Search employee by name or ID",fullWidth:!0,value:x,onChange:t=>b(t.target.value),InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(D,{})})},sx:{mb:1}}),e.jsx(X,{spacing:.5,children:k.map(t=>e.jsxs(m,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{checked:p.some(n=>n.id===t.id),onChange:()=>L(t)}),e.jsx(u,{children:`${t.name} (${t.id}) - ${t.designation}`})]},t.id))})]})]}),e.jsxs(J,{children:[e.jsx(g,{onClick:f,children:"Cancel"}),e.jsx(g,{onClick:M,variant:"contained",sx:{bgcolor:"#0A3A6E"},children:"Save TBT"})]})]})]})};export{We as default};
