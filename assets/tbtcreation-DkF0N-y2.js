import{r as o,j as e,R as F}from"./index-o2L8XDyT.js";import{B as m,C as H,T as u,a as A,b as S,c as a,d as s,e as I}from"./TableRow-LAUI0Gax.js";import{C as N}from"./CardHeader-D_cDB1rm.js";import{B as g}from"./Modal-DwRNYzNZ.js";import{C as O}from"./CardContent-y0pBm6N5.js";import{T as r}from"./TextField-CqNGJcSQ.js";import{I as D,S as P}from"./Search-PceUVjHr.js";import{I as $}from"./IconButton-BsqESdtl.js";import{E as z}from"./ExpandLess-CmlZXmnm.js";import{E as G}from"./ExpandMore-C-71Y4UC.js";import{C as q}from"./Collapse-D8mIRDQF.js";import{D as K,a as V,b as Y,c as J}from"./DialogTitle--WyXxo1x.js";import{G as l}from"./Grid-B_cFiybh.js";import{M as Q}from"./MenuItem-DD5KVmZ_.js";import{S as U}from"./Stack-CC4QwJVT.js";import{C as X}from"./Checkbox-B7vmekyc.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-E3CKQj5Y.js";import"./TransitionGroupContext-Dcol0yJe.js";import"./Transition-Dl-PhuCn.js";import"./InputLabel-DN3vyk4T.js";import"./Select-BAX3otil.js";import"./index-DMX1Y610.js";import"./isMuiElement-Dd7xnTXW.js";import"./dividerClasses-AJeEqX5c.js";import"./SwitchBase-BPJm9kF7.js";const Ie=()=>{const[W,f]=o.useState(!1),[c,v]=o.useState([]),[x,b]=o.useState(""),[j,C]=o.useState([]),[T,y]=o.useState([]),[i,E]=o.useState({tbtId:"",project:"",date:"",topic:"",discussionPoints:""}),B=["Building A Extension","Road Construction","Pipeline Installation"],w=[{id:"EMP001",name:"Ravi Kumar",designation:"Welder",department:"Fabrication"},{id:"EMP002",name:"Sita Das",designation:"Supervisor",department:"Civil"},{id:"EMP003",name:"Amit Roy",designation:"Electrician",department:"Electrical"},{id:"EMP004",name:"Priya Sharma",designation:"Safety Officer",department:"Safety"},{id:"EMP005",name:"Rahul Verma",designation:"Fitter",department:"Mechanical"}].filter(t=>t.name.toLowerCase().includes(x.toLowerCase())||t.id.toLowerCase().includes(x.toLowerCase())),R=()=>{const t=`TBT-${(c.length+1).toString().padStart(3,"0")}`;E({...i,tbtId:t}),f(!0)},p=()=>{f(!1),C([])},k=t=>{C(n=>n.some(d=>d.id===t.id)?n.filter(d=>d.id!==t.id):[...n,t])},h=t=>{E({...i,[t.target.name]:t.target.value})},L=()=>{if(!i.project||!i.topic||j.length===0){alert("Please fill all required fields and select at least one attendee.");return}const t={...i,attendees:j};v([...c,t]),p()},M=t=>{y(n=>n.includes(t)?n.filter(d=>d!==t):[...n,t])};return e.jsxs(m,{sx:{p:3},children:[e.jsxs(H,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(N,{title:e.jsx(u,{variant:"h6",sx:{color:"#0A3A6E",fontWeight:"bold"},children:"Toolbox Talk (TBT) Creation & Scheduling"}),action:e.jsx(g,{variant:"contained",onClick:R,sx:{bgcolor:"#0A3A6E"},children:"+ Create New TBT"})}),e.jsxs(O,{children:[e.jsx(r,{placeholder:"Search Here",fullWidth:!0,value:x,onChange:t=>b(t.target.value),InputProps:{startAdornment:e.jsx(D,{position:"start",children:e.jsx(P,{})})},sx:{mb:2}}),e.jsxs(A,{children:[e.jsx(S,{children:e.jsxs(a,{sx:{background:"#E3F2FD"},children:[e.jsx(s,{}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"TBT ID"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Project"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Date"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Topic"})]})}),e.jsxs(I,{children:[c.map(t=>e.jsxs(F.Fragment,{children:[e.jsxs(a,{children:[e.jsx(s,{children:e.jsx($,{size:"small",onClick:()=>M(t.tbtId),children:T.includes(t.tbtId)?e.jsx(z,{}):e.jsx(G,{})})}),e.jsx(s,{children:t.tbtId}),e.jsx(s,{children:t.project}),e.jsx(s,{children:t.date}),e.jsx(s,{children:t.topic})]}),e.jsx(a,{children:e.jsx(s,{colSpan:5,sx:{p:0,border:"none"},children:e.jsx(q,{in:T.includes(t.tbtId),timeout:"auto",unmountOnExit:!0,children:e.jsxs(m,{sx:{margin:1},children:[e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:"Attendees"}),e.jsxs(A,{size:"small",children:[e.jsx(S,{children:e.jsxs(a,{sx:{background:"#E8F5E9"},children:[e.jsx(s,{children:"Employee ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Designation"}),e.jsx(s,{children:"Department"})]})}),e.jsx(I,{children:t.attendees.map(n=>e.jsxs(a,{children:[e.jsx(s,{children:n.id}),e.jsx(s,{children:n.name}),e.jsx(s,{children:n.designation}),e.jsx(s,{children:n.department})]},n.id))})]})]})})})})]},t.tbtId)),c.length===0&&e.jsx(a,{children:e.jsx(s,{colSpan:5,align:"center",children:"No TBT records found."})})]})]})]})]}),e.jsxs(K,{open:W,onClose:p,fullWidth:!0,maxWidth:"lg",children:[e.jsx(V,{sx:{bgcolor:"#0A3A6E",color:"#fff",fontWeight:"bold"},children:"Create New Toolbox Talk"}),e.jsxs(Y,{sx:{mt:2},children:[e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(r,{label:"TBT ID",name:"tbtId",value:i.tbtId,fullWidth:!0,disabled:!0})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(r,{select:!0,label:"Project",name:"project",value:i.project,onChange:h,fullWidth:!0,children:B.map(t=>e.jsx(Q,{value:t,children:t},t))})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(r,{label:"Date",name:"date",type:"date",value:i.date,onChange:h,fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(r,{label:"Topic",name:"topic",value:i.topic,onChange:h,fullWidth:!0})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{label:"Discussion Points",name:"discussionPoints",multiline:!0,rows:3,value:i.discussionPoints,onChange:h,fullWidth:!0})})]}),e.jsxs(m,{sx:{mt:3,maxHeight:250,overflowY:"auto",border:"1px solid #ccc",borderRadius:1,p:1},children:[e.jsx(u,{variant:"subtitle1",sx:{color:"#0A3A6E",fontWeight:"bold",mb:1},children:"Select Attendees"}),e.jsx(r,{placeholder:"Search employee by name or ID",fullWidth:!0,value:x,onChange:t=>b(t.target.value),InputProps:{startAdornment:e.jsx(D,{position:"start",children:e.jsx(P,{})})},sx:{mb:1}}),e.jsx(U,{spacing:.5,children:w.map(t=>e.jsxs(m,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(X,{checked:j.some(n=>n.id===t.id),onChange:()=>k(t)}),e.jsx(u,{children:`${t.name} (${t.id}) - ${t.designation}`})]},t.id))})]})]}),e.jsxs(J,{children:[e.jsx(g,{onClick:p,children:"Cancel"}),e.jsx(g,{onClick:L,variant:"contained",sx:{bgcolor:"#0A3A6E"},children:"Save TBT"})]})]})]})};export{Ie as default};
