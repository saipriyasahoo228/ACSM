import{j as e,r as m}from"./index-lQRenEQZ.js";import{E as J}from"./jspdf.es.min-DQkEuSHK.js";import"./jspdf.plugin.autotable-D1pcuC_d.js";import{f as H,g as Q,h as X,s as E,m as Z,u as ee,k as re,B as b,C as v,T as d,a as B,b as W,c as y,d as s,e as M}from"./TableRow-DOrBXlsl.js";import{G as C}from"./Grid-DAMVHerN.js";import{C as A}from"./CardContent-B105ua6l.js";import{S as D}from"./Stack-CbGqEpRV.js";import{c as te}from"./clsx-B-dksMZM.js";import{u as k}from"./ButtonBase-DbGEVCCx.js";import{A as oe}from"./Assignment-DjezzTZ_.js";import{C as F}from"./CheckCircle-DAh_pi6a.js";import{C as L}from"./CardHeader-CVfYXhzf.js";import{a2 as se,a3 as ae,a4 as ne,C as ie,a5 as le,a6 as ce}from"./PieChart-2tZvBFKc.js";import{T as de}from"./TextField-DSnqcXEl.js";import{I as fe,S as xe}from"./Search-B-bLmECG.js";import{I as O}from"./IconButton-T04wkc8J.js";import{V as he}from"./Visibility-DH6hifgy.js";import{D as pe}from"./Download-CGdKchgg.js";import{D as me,a as ge,b as ue,c as je}from"./DialogTitle-BY4vkXbS.js";import{B as be}from"./Modal-B5kKy10H.js";import"./isMuiElement-CkiPPDrS.js";import"./TransitionGroupContext-Cr6fGhL9.js";import"./InputLabel-D6fBawzD.js";import"./Select-BG3pRAtK.js";import"./index-BGy4LR6Y.js";import"./Transition-CaP-LOaf.js";const ve=H(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Ae(o){return X("MuiAvatar",o)}Q("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Se=o=>{const{classes:i,variant:t,colorDefault:n}=o;return re({root:["root",t,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Ae,i)},ye=E("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:t}=o;return[i.root,i[t.variant],t.colorDefault&&i.colorDefault]}})(Z(({theme:o})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:o.typography.fontFamily,fontSize:o.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(o.vars||o).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(o.vars||o).palette.background.default,...o.vars?{backgroundColor:o.vars.palette.Avatar.defaultBg}:{backgroundColor:o.palette.grey[400],...o.applyStyles("dark",{backgroundColor:o.palette.grey[600]})}}}]}))),Ce=E("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),De=E(ve,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function we({crossOrigin:o,referrerPolicy:i,src:t,srcSet:n}){const[h,c]=m.useState(!1);return m.useEffect(()=>{if(!t&&!n)return;c(!1);let f=!0;const l=new Image;return l.onload=()=>{f&&c("loaded")},l.onerror=()=>{f&&c("error")},l.crossOrigin=o,l.referrerPolicy=i,l.src=t,n&&(l.srcset=n),()=>{f=!1}},[o,i,t,n]),h}const I=m.forwardRef(function(i,t){const n=ee({props:i,name:"MuiAvatar"}),{alt:h,children:c,className:f,component:l="div",slots:u={},slotProps:x={},imgProps:S,sizes:w,src:g,srcSet:r,variant:a="circular",...U}=n;let j=null;const p={...n,component:l,variant:a},$=we({...S,...typeof x.img=="function"?x.img(p):x.img,src:g,srcSet:r}),R=g||r,T=R&&$!=="error";p.colorDefault=!T,delete p.ownerState;const P=Se(p),[z,G]=k("root",{ref:t,className:te(P.root,f),elementType:ye,externalForwardedProps:{slots:u,slotProps:x,component:l,...U},ownerState:p}),[K,Y]=k("img",{className:P.img,elementType:Ce,externalForwardedProps:{slots:u,slotProps:{img:{...S,...x.img}}},additionalProps:{alt:h,src:g,srcSet:r,sizes:w},ownerState:p}),[q,_]=k("fallback",{className:P.fallback,elementType:De,externalForwardedProps:{slots:u,slotProps:x},shouldForwardComponentProp:!0,ownerState:p});return T?j=e.jsx(K,{...Y}):c||c===0?j=c:R&&h?j=h[0]:j=e.jsx(q,{..._}),e.jsx(z,{...G,children:j})}),Pe=H(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),ke=[{tbtId:"TBT-001",project:"Building A Extension",date:"2025-10-17",topic:"Working at Height",discussionPoints:"Use harness, safety checks",attendees:[{id:"EMP001",name:"Ravi Kumar",designation:"Welder",department:"Fabrication"},{id:"EMP002",name:"Sita Das",designation:"Supervisor",department:"Civil"},{id:"EMP003",name:"Amit Roy",designation:"Electrician",department:"Electrical"}],officerSignOff:{name:"Priya Sharma",date:"2025-10-17"}},{tbtId:"TBT-002",project:"Factory B Renovation",date:"2025-10-18",topic:"Electrical Safety",discussionPoints:"Use gloves, isolate circuits",attendees:[{id:"EMP004",name:"Rahul Verma",designation:"Fitter",department:"Mechanical"},{id:"EMP005",name:"Priya Sharma",designation:"Safety Officer",department:"Safety"}],officerSignOff:{name:"Sita Das",date:"2025-10-18"}}],N=[{name:"Present",value:7},{name:"Absent",value:3}],V=["#0A3A6E","#FF6B6B"];function rr(){var g;const[o,i]=m.useState(ke),[t,n]=m.useState(null),[h,c]=m.useState(!1),[f,l]=m.useState(""),u=r=>{n(r),c(!0)},x=()=>{n(null),c(!1)},S=()=>{if(!t)return;const r=new J;r.text(`TBT ID: ${t.tbtId}`,14,20),r.text(`Project: ${t.project}`,14,28),r.text(`Date: ${t.date}`,14,36),r.text(`Topic: ${t.topic}`,14,44),r.autoTable({startY:50,head:[["ID","Name","Designation","Department","Present","Reason"]],body:t.attendees.map(a=>[a.id,a.name,a.designation,a.department,a.present!==void 0?a.present?"Yes":"No":"N/A",a.reason||""])}),r.save(`${t.tbtId}_Attendance.pdf`)},w=o.filter(r=>r.tbtId.toLowerCase().includes(f.toLowerCase())||r.project.toLowerCase().includes(f.toLowerCase()));return e.jsxs(b,{sx:{p:3,background:"linear-gradient(to right, #e0f7fa, #f1f8e9)"},children:[e.jsxs(C,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(C,{item:!0,xs:12,md:4,children:e.jsx(v,{sx:{borderRadius:3,background:"linear-gradient(135deg, #0A3A6E 0%, #3A7BD5 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(A,{children:e.jsxs(D,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{sx:{bgcolor:"#fff",color:"#0A3A6E"},children:e.jsx(oe,{})}),e.jsxs(b,{children:[e.jsx(d,{variant:"subtitle2",sx:{opacity:.8},children:"Total TBTs"}),e.jsx(d,{variant:"h5",sx:{fontWeight:"bold"},children:o.length})]})]})})})}),e.jsx(C,{item:!0,xs:12,md:4,children:e.jsx(v,{sx:{borderRadius:3,background:"linear-gradient(135deg, #FF6B6B 0%, #FF8E72 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(A,{children:e.jsxs(D,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{sx:{bgcolor:"#fff",color:"#FF6B6B"},children:e.jsx(Pe,{})}),e.jsxs(b,{children:[e.jsx(d,{variant:"subtitle2",sx:{opacity:.8},children:"Total Attendees"}),e.jsx(d,{variant:"h5",sx:{fontWeight:"bold"},children:o.reduce((r,a)=>r+a.attendees.length,0)})]})]})})})}),e.jsx(C,{item:!0,xs:12,md:4,children:e.jsx(v,{sx:{borderRadius:3,background:"linear-gradient(135deg, #4CAF50 0%, #81C784 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(A,{children:e.jsxs(D,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(I,{sx:{bgcolor:"#fff",color:"#4CAF50"},children:e.jsx(F,{})}),e.jsxs(b,{children:[e.jsx(d,{variant:"subtitle2",sx:{opacity:.8},children:"Pending Sign-offs"}),e.jsx(d,{variant:"h5",sx:{fontWeight:"bold"},children:o.filter(r=>{var a;return!((a=r.officerSignOff)!=null&&a.name)}).length})]})]})})})})]}),e.jsxs(v,{sx:{mb:3,borderRadius:3,boxShadow:"0px 4px 20px rgba(0,0,0,0.1),",background:"linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%)"},children:[e.jsx(L,{title:e.jsx(d,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Attendance Summary"})}),e.jsx(A,{sx:{height:250},children:e.jsx(se,{width:"100%",height:"100%",children:e.jsxs(ae,{children:[e.jsx(ne,{data:N,dataKey:"value",nameKey:"name",outerRadius:80,label:{fill:"#0A3A6E",fontWeight:"bold"},children:N.map((r,a)=>e.jsx(ie,{fill:V[a%V.length]},`cell-${a}`))}),e.jsx(le,{}),e.jsx(ce,{})]})})})]}),e.jsxs(v,{sx:{borderRadius:3,boxShadow:"0px 4px 20px rgba(0,0,0,0.1)",background:"#f9f9f9"},children:[e.jsx(L,{title:e.jsx(d,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"TBT List"}),action:e.jsx(de,{placeholder:"Search by TBT ID / Project",value:f,onChange:r=>l(r.target.value),InputProps:{startAdornment:e.jsx(fe,{position:"start",children:e.jsx(xe,{})})}})}),e.jsx(A,{children:e.jsxs(B,{sx:{borderRadius:2},children:[e.jsx(W,{children:e.jsxs(y,{sx:{background:"linear-gradient(90deg, #0A3A6E, #3A7BD5)",color:"#fff"},children:[e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"TBT ID"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Project"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Date"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Topic"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Sign-off"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Actions"})]})}),e.jsx(M,{children:w.map(r=>{var a;return e.jsxs(y,{sx:{"&:hover":{backgroundColor:"#f1f1f1"}},children:[e.jsx(s,{children:r.tbtId}),e.jsx(s,{children:r.project}),e.jsx(s,{children:r.date}),e.jsx(s,{children:r.topic}),e.jsx(s,{children:((a=r.officerSignOff)==null?void 0:a.name)||"Pending"}),e.jsx(s,{children:e.jsxs(D,{direction:"row",spacing:1,children:[e.jsx(O,{color:"primary",onClick:()=>u(r),children:e.jsx(he,{})}),e.jsx(O,{color:"secondary",onClick:S,children:e.jsx(pe,{})})]})})]},r.tbtId)})})]})})]}),e.jsxs(me,{open:h,onClose:x,fullWidth:!0,maxWidth:"md",children:[e.jsxs(ge,{sx:{bgcolor:"#0A3A6E",color:"#fff"},children:[t==null?void 0:t.tbtId," - Final Attendance"]}),e.jsxs(ue,{sx:{mt:2},children:[e.jsxs(d,{sx:{fontWeight:"bold",color:"#0A3A6E",mb:1},children:["Project: ",t==null?void 0:t.project," | Date: ",t==null?void 0:t.date," | Topic: ",t==null?void 0:t.topic]}),e.jsxs(d,{sx:{fontWeight:"bold",color:"#0A3A6E",mb:1},children:["Safety Officer: ",((g=t==null?void 0:t.officerSignOff)==null?void 0:g.name)||"Pending"]}),e.jsx(b,{sx:{maxHeight:400,overflowY:"auto"},children:e.jsxs(B,{stickyHeader:!0,children:[e.jsx(W,{children:e.jsxs(y,{sx:{background:"linear-gradient(90deg, #0A3A6E, #3A7BD5)",color:"#fff"},children:[e.jsx(s,{children:"Present"}),e.jsx(s,{children:"Employee ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Designation"}),e.jsx(s,{children:"Department"}),e.jsx(s,{children:"Reason (if absent)"})]})}),e.jsx(M,{children:t==null?void 0:t.attendees.map(r=>e.jsxs(y,{sx:{"&:hover":{backgroundColor:"#f9f9f9"}},children:[e.jsx(s,{children:r.present!==!1?e.jsx(F,{sx:{color:"#4CAF50"}}):e.jsx(F,{sx:{color:"#FF6B6B"}})}),e.jsx(s,{children:r.id}),e.jsx(s,{children:r.name}),e.jsx(s,{children:r.designation}),e.jsx(s,{children:r.department}),e.jsx(s,{children:r.reason||""})]},r.id))})]})})]}),e.jsx(je,{children:e.jsx(be,{onClick:x,color:"primary",children:"Close"})})]})]})}export{rr as default};
