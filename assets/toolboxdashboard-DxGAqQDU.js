import{j as e,r as l}from"./index-DeCPM1YT.js";import{E as T}from"./jspdf.es.min-zcs_wkLJ.js";import"./jspdf.plugin.autotable-D1pcuC_d.js";import{f as W,B as n,C as a,T as o,a as S,b as C,c as x,d as s,e as D}from"./TableRow-Cd9L6edy.js";import{G as h}from"./Grid-DCJmtdp8.js";import{C as d}from"./CardContent-DuW-pjc9.js";import{S as f}from"./Stack-Cb_zqfoO.js";import{A as j}from"./Avatar-lZVZDJOL.js";import{A as R}from"./Assignment-CaBj9uO4.js";import{C as p}from"./CheckCircle-C2kPpGRV.js";import{C as y}from"./CardHeader-BFOCdbev.js";import{a2 as O,a3 as L,a4 as V,C as M,a5 as $,a6 as H}from"./PieChart-BdX2N8sv.js";import{T as N}from"./TextField-RAEaaxPg.js";import{I as G}from"./InputAdornment-DyuYPr7S.js";import{S as K}from"./Search-C-psGFWq.js";import{I as E}from"./IconButton-oK9S63L7.js";import{V as Y}from"./Visibility-C31cYtGb.js";import{D as U}from"./Download-CTE8ntCV.js";import{D as _,a as q,b as z,c as J}from"./DialogTitle-D5MRwTrG.js";import{B as Q}from"./Button-i0LS_vGv.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./isMuiElement-DPWNH1dL.js";import"./InputLabel-uQorTdpH.js";import"./Select-B0BFEktc.js";import"./index-DeXogL32.js";import"./Modal-CUDL2x5c.js";import"./Transition-B84HZYJ-.js";const X=W(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),Z=[{tbtId:"TBT-001",project:"Building A Extension",date:"2025-10-17",topic:"Working at Height",discussionPoints:"Use harness, safety checks",attendees:[{id:"EMP001",name:"Ravi Kumar",designation:"Welder",department:"Fabrication"},{id:"EMP002",name:"Sita Das",designation:"Supervisor",department:"Civil"},{id:"EMP003",name:"Amit Roy",designation:"Electrician",department:"Electrical"}],officerSignOff:{name:"Priya Sharma",date:"2025-10-17"}},{tbtId:"TBT-002",project:"Factory B Renovation",date:"2025-10-18",topic:"Electrical Safety",discussionPoints:"Use gloves, isolate circuits",attendees:[{id:"EMP004",name:"Rahul Verma",designation:"Fitter",department:"Mechanical"},{id:"EMP005",name:"Priya Sharma",designation:"Safety Officer",department:"Safety"}],officerSignOff:{name:"Sita Das",date:"2025-10-18"}}],v=[{name:"Present",value:7},{name:"Absent",value:3}],w=["#0A3A6E","#FF6B6B"];function Pe(){var A;const[c,ee]=l.useState(Z),[i,g]=l.useState(null),[F,b]=l.useState(!1),[m,I]=l.useState(""),P=r=>{g(r),b(!0)},u=()=>{g(null),b(!1)},B=()=>{if(!i)return;const r=new T;r.text(`TBT ID: ${i.tbtId}`,14,20),r.text(`Project: ${i.project}`,14,28),r.text(`Date: ${i.date}`,14,36),r.text(`Topic: ${i.topic}`,14,44),r.autoTable({startY:50,head:[["ID","Name","Designation","Department","Present","Reason"]],body:i.attendees.map(t=>[t.id,t.name,t.designation,t.department,t.present!==void 0?t.present?"Yes":"No":"N/A",t.reason||""])}),r.save(`${i.tbtId}_Attendance.pdf`)},k=c.filter(r=>r.tbtId.toLowerCase().includes(m.toLowerCase())||r.project.toLowerCase().includes(m.toLowerCase()));return e.jsxs(n,{sx:{p:3,background:"linear-gradient(to right, #e0f7fa, #f1f8e9)"},children:[e.jsxs(h,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(a,{sx:{borderRadius:3,background:"linear-gradient(135deg, #0A3A6E 0%, #3A7BD5 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(d,{children:e.jsxs(f,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(j,{sx:{bgcolor:"#fff",color:"#0A3A6E"},children:e.jsx(R,{})}),e.jsxs(n,{children:[e.jsx(o,{variant:"subtitle2",sx:{opacity:.8},children:"Total TBTs"}),e.jsx(o,{variant:"h5",sx:{fontWeight:"bold"},children:c.length})]})]})})})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(a,{sx:{borderRadius:3,background:"linear-gradient(135deg, #FF6B6B 0%, #FF8E72 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(d,{children:e.jsxs(f,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(j,{sx:{bgcolor:"#fff",color:"#FF6B6B"},children:e.jsx(X,{})}),e.jsxs(n,{children:[e.jsx(o,{variant:"subtitle2",sx:{opacity:.8},children:"Total Attendees"}),e.jsx(o,{variant:"h5",sx:{fontWeight:"bold"},children:c.reduce((r,t)=>r+t.attendees.length,0)})]})]})})})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(a,{sx:{borderRadius:3,background:"linear-gradient(135deg, #4CAF50 0%, #81C784 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0,0,0,0.1)"},children:e.jsx(d,{children:e.jsxs(f,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(j,{sx:{bgcolor:"#fff",color:"#4CAF50"},children:e.jsx(p,{})}),e.jsxs(n,{children:[e.jsx(o,{variant:"subtitle2",sx:{opacity:.8},children:"Pending Sign-offs"}),e.jsx(o,{variant:"h5",sx:{fontWeight:"bold"},children:c.filter(r=>{var t;return!((t=r.officerSignOff)!=null&&t.name)}).length})]})]})})})})]}),e.jsxs(a,{sx:{mb:3,borderRadius:3,boxShadow:"0px 4px 20px rgba(0,0,0,0.1),",background:"linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%)"},children:[e.jsx(y,{title:e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"Attendance Summary"})}),e.jsx(d,{sx:{height:250},children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(L,{children:[e.jsx(V,{data:v,dataKey:"value",nameKey:"name",outerRadius:80,label:{fill:"#0A3A6E",fontWeight:"bold"},children:v.map((r,t)=>e.jsx(M,{fill:w[t%w.length]},`cell-${t}`))}),e.jsx($,{}),e.jsx(H,{})]})})})]}),e.jsxs(a,{sx:{borderRadius:3,boxShadow:"0px 4px 20px rgba(0,0,0,0.1)",background:"#f9f9f9"},children:[e.jsx(y,{title:e.jsx(o,{sx:{fontWeight:"bold",color:"#0A3A6E"},children:"TBT List"}),action:e.jsx(N,{placeholder:"Search by TBT ID / Project",value:m,onChange:r=>I(r.target.value),InputProps:{startAdornment:e.jsx(G,{position:"start",children:e.jsx(K,{})})}})}),e.jsx(d,{children:e.jsxs(S,{sx:{borderRadius:2},children:[e.jsx(C,{children:e.jsxs(x,{sx:{background:"linear-gradient(90deg, #0A3A6E, #3A7BD5)",color:"#fff"},children:[e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"TBT ID"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Project"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Date"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Topic"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Sign-off"}),e.jsx(s,{sx:{fontWeight:"bold",color:"#fff"},children:"Actions"})]})}),e.jsx(D,{children:k.map(r=>{var t;return e.jsxs(x,{sx:{"&:hover":{backgroundColor:"#f1f1f1"}},children:[e.jsx(s,{children:r.tbtId}),e.jsx(s,{children:r.project}),e.jsx(s,{children:r.date}),e.jsx(s,{children:r.topic}),e.jsx(s,{children:((t=r.officerSignOff)==null?void 0:t.name)||"Pending"}),e.jsx(s,{children:e.jsxs(f,{direction:"row",spacing:1,children:[e.jsx(E,{color:"primary",onClick:()=>P(r),children:e.jsx(Y,{})}),e.jsx(E,{color:"secondary",onClick:B,children:e.jsx(U,{})})]})})]},r.tbtId)})})]})})]}),e.jsxs(_,{open:F,onClose:u,fullWidth:!0,maxWidth:"md",children:[e.jsxs(q,{sx:{bgcolor:"#0A3A6E",color:"#fff"},children:[i==null?void 0:i.tbtId," - Final Attendance"]}),e.jsxs(z,{sx:{mt:2},children:[e.jsxs(o,{sx:{fontWeight:"bold",color:"#0A3A6E",mb:1},children:["Project: ",i==null?void 0:i.project," | Date: ",i==null?void 0:i.date," | Topic: ",i==null?void 0:i.topic]}),e.jsxs(o,{sx:{fontWeight:"bold",color:"#0A3A6E",mb:1},children:["Safety Officer: ",((A=i==null?void 0:i.officerSignOff)==null?void 0:A.name)||"Pending"]}),e.jsx(n,{sx:{maxHeight:400,overflowY:"auto"},children:e.jsxs(S,{stickyHeader:!0,children:[e.jsx(C,{children:e.jsxs(x,{sx:{background:"linear-gradient(90deg, #0A3A6E, #3A7BD5)",color:"#fff"},children:[e.jsx(s,{children:"Present"}),e.jsx(s,{children:"Employee ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Designation"}),e.jsx(s,{children:"Department"}),e.jsx(s,{children:"Reason (if absent)"})]})}),e.jsx(D,{children:i==null?void 0:i.attendees.map(r=>e.jsxs(x,{sx:{"&:hover":{backgroundColor:"#f9f9f9"}},children:[e.jsx(s,{children:r.present!==!1?e.jsx(p,{sx:{color:"#4CAF50"}}):e.jsx(p,{sx:{color:"#FF6B6B"}})}),e.jsx(s,{children:r.id}),e.jsx(s,{children:r.name}),e.jsx(s,{children:r.designation}),e.jsx(s,{children:r.department}),e.jsx(s,{children:r.reason||""})]},r.id))})]})})]}),e.jsx(J,{children:e.jsx(Q,{onClick:u,color:"primary",children:"Close"})})]})]})}export{Pe as default};
