import{j as e,r as x}from"./index-78vIXnNX.js";import{g as C,B as d,C as W,T as a,a as M,b as z,c as B,d as j,e as r,f as F,P as H}from"./TableRow-Bh4s7eKd.js";import{C as G,S as h}from"./Stack-SA5ch7KR.js";import{B as g}from"./Modal-BRuT0w2r.js";import{A as L}from"./Add-B0X4t8Dt.js";import{C as f}from"./Chip-CV93Yug4.js";import{I as P,D as $}from"./Delete-De6SPuXf.js";import{E as N}from"./Edit-BTYUVQFF.js";import{D as K,a as Q,b as J,c as U}from"./DialogTitle-Cr0WkrxD.js";import{A as S}from"./Autocomplete-5kGlPUL5.js";import{T as y}from"./TextField-D_h3ch71.js";import{D as A}from"./Divider-DDSck4yO.js";import{M as X}from"./MenuItem-EDr2Hmyh.js";import{C as Y}from"./Checkbox-CPetFkIL.js";import"./clsx-B-dksMZM.js";import"./Transition-DLvuwqKz.js";import"./Select-BDRxS8K1.js";import"./index-Cf5oalkp.js";import"./Close-CRcyvVRX.js";import"./Popper-t28B73-l.js";import"./InputLabel-D2cET7_l.js";import"./isMuiElement-CcGzOGYR.js";import"./SwitchBase-Dc6i0zXX.js";const Z=C(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),V=C(e.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),E=C(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ee=["PPE","Safety Gear","Tools","Dress"],b=[{id:"PPE-001",name:"Safety Helmet",renewal:12,type:"PPE",category:"Head Protection"},{id:"PPE-002",name:"Acid-Resistant Gloves",renewal:6,type:"PPE",category:"Hand Protection"},{id:"PPE-003",name:"Safety Shoes",renewal:18,type:"PPE",category:"Foot Protection"},{id:"TOOL-001",name:"Tool Kit A",renewal:24,type:"Tools",category:"Electrical"},{id:"TOOL-002",name:"Drill Machine",renewal:12,type:"Tools",category:"Mechanical"},{id:"GEAR-001",name:"Face Shield",renewal:12,type:"Safety Gear",category:"Face Protection"}],R=[{id:"EMP-001",name:"Rajesh Kumar",code:"RK01",department:"Welding"},{id:"EMP-002",name:"Priya Sharma",code:"PS02",department:"Electrical"},{id:"EMP-003",name:"Amit Patel",code:"AP03",department:"Mechanical"}],te=e.jsx(V,{fontSize:"small"}),se=e.jsx(Z,{fontSize:"small"});function Ae(){const[i,u]=x.useState([]),[q,m]=x.useState(!1),[p,_]=x.useState(null),[o,c]=x.useState({employee_name:"",employee_id:"",department:"",item_type:"",requested_items:[],approval_status:"Pending",request_date:""}),I=()=>{_(null),c({employee_name:"",employee_id:"",department:"",item_type:"",requested_items:[],approval_status:"Pending",request_date:new Date().toISOString().split("T")[0]}),m(!0)},k=t=>{_(t),c(i[t]),m(!0)},D=()=>{if(!o.employee_name||!o.item_type||o.requested_items.length===0){alert("Please select employee, item type, and at least one item");return}const t={...o,request_id:p!==null?o.request_id:`REQ-${i.length+1}`,request_date:new Date().toISOString().split("T")[0]};if(p!==null){const s=[...i];s[p]=t,u(s)}else u([t,...i]);m(!1)},T=t=>{if(window.confirm("Are you sure you want to delete this request?")){const s=[...i];s.splice(t,1),u(s)}},O=t=>{switch(t){case"Approved":return"success";case"Issued":return"info";case"Denied":return"error";case"Pending":return"warning";default:return"default"}},v=b.filter(t=>t.type===o.item_type);return e.jsxs(d,{sx:{p:3},children:[e.jsxs(W,{sx:{borderLeft:"6px solid #0A3A6E",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:2},children:[e.jsx(G,{title:e.jsxs(a,{variant:"h5",sx:{color:"#0A3A6E",fontWeight:600},children:[e.jsx(E,{sx:{mr:1,verticalAlign:"middle"}}),"Contractor Admin - Item Requests"]}),subheader:"Create and manage PPE, Tools, and Safety Gear issuance requests",action:e.jsx(g,{variant:"contained",startIcon:e.jsx(L,{}),onClick:I,sx:{backgroundColor:"#0A3A6E",color:"#fff",borderRadius:2,px:3,"&:hover":{backgroundColor:"#082A52"}},children:"New Request"})}),e.jsx(M,{children:e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(j,{sx:{backgroundColor:"#E3EAFD"},children:[e.jsx(r,{children:"Request ID"}),e.jsx(r,{children:"Employee"}),e.jsx(r,{children:"Department"}),e.jsx(r,{children:"Item Type"}),e.jsx(r,{children:"Requested Items"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Request Date"}),e.jsx(r,{children:"Actions"})]})}),e.jsxs(F,{children:[i.map((t,s)=>e.jsxs(j,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(r,{children:t.request_id}),e.jsx(r,{children:e.jsxs(d,{children:[e.jsx(a,{sx:{fontWeight:600,fontSize:"0.875rem"},children:t.employee_name}),e.jsx(a,{sx:{color:"text.secondary",fontSize:"0.75rem"},children:t.employee_id})]})}),e.jsx(r,{children:t.department}),e.jsx(r,{children:t.item_type}),e.jsx(r,{children:e.jsx(h,{direction:"row",spacing:.5,flexWrap:"wrap",useFlexGap:!0,children:t.requested_items.map(n=>{const l=b.find(w=>w.id===n);return e.jsx(f,{label:l==null?void 0:l.name,size:"small",sx:{mb:.5}},n)})})}),e.jsx(r,{children:e.jsx(f,{label:t.approval_status,color:O(t.approval_status),size:"small"})}),e.jsx(r,{children:t.request_date}),e.jsx(r,{children:e.jsxs(h,{direction:"row",spacing:.5,children:[t.approval_status==="Pending"&&e.jsx(P,{color:"primary",onClick:()=>k(s),size:"small",title:"Edit Request",children:e.jsx(N,{})}),e.jsx(P,{color:"error",onClick:()=>T(s),size:"small",title:"Delete Request",children:e.jsx($,{})})]})})]},s)),i.length===0&&e.jsx(j,{children:e.jsx(r,{colSpan:8,align:"center",sx:{py:4},children:e.jsxs(a,{color:"text.secondary",children:["No requests created yet. Click ",e.jsx("b",{children:"New Request"})," to create one."]})})})]})]})})]}),e.jsxs(K,{open:q,onClose:()=>m(!1),fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:3,boxShadow:"0 10px 40px rgba(0,0,0,0.1)"}},children:[e.jsxs(Q,{sx:{backgroundColor:"#0A3A6E",color:"white",fontWeight:600,py:3},children:[e.jsx(E,{sx:{mr:1,verticalAlign:"middle"}}),p!==null?"Edit Item Request":"New Item Request"]}),e.jsx(J,{sx:{p:4},children:e.jsxs(h,{spacing:4,children:[e.jsxs(d,{children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#0A3A6E"},children:"Select Employee"}),e.jsx(S,{options:R,getOptionLabel:t=>`${t.name} (${t.code}) - ${t.department}`,value:R.find(t=>t.id===o.employee_id)||null,onChange:(t,s)=>{c(n=>({...n,employee_id:(s==null?void 0:s.id)||"",employee_name:(s==null?void 0:s.name)||"",department:(s==null?void 0:s.department)||""}))},renderInput:t=>e.jsx(y,{...t,placeholder:"Search employee",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"#f8f9fa"}}}),isOptionEqualToValue:(t,s)=>t.id===s.id})]}),e.jsx(A,{}),e.jsxs(d,{children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#0A3A6E"},children:"Select Item Type"}),e.jsx(y,{select:!0,fullWidth:!0,value:o.item_type,onChange:t=>c(s=>({...s,item_type:t.target.value,requested_items:[]})),children:ee.map((t,s)=>e.jsx(X,{value:t,children:t},s))})]}),e.jsx(A,{}),e.jsxs(d,{children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2,color:"#0A3A6E"},children:"Select Items"}),e.jsxs(H,{variant:"outlined",sx:{p:2,borderRadius:2,backgroundColor:"#f8f9fa"},children:[e.jsx(S,{multiple:!0,options:v,disableCloseOnSelect:!0,getOptionLabel:t=>t.name,value:v.filter(t=>o.requested_items.includes(t.id)),onChange:(t,s)=>{c(n=>({...n,requested_items:s.map(l=>l.id)}))},renderOption:(t,s,{selected:n})=>e.jsxs("li",{...t,style:{padding:"12px 16px",borderBottom:"1px solid #e0e0e0"},children:[e.jsx(Y,{icon:te,checkedIcon:se,style:{marginRight:12},checked:n}),e.jsxs(d,{children:[e.jsx(a,{variant:"body1",fontWeight:500,children:s.name}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:[s.category," â€¢ Renewal: ",s.renewal," months"]})]})]}),renderInput:t=>e.jsx(y,{...t,placeholder:`Choose ${o.item_type||"items"} from list`,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}}})}),o.requested_items.length>0&&e.jsxs(d,{sx:{mt:2,p:2,backgroundColor:"white",borderRadius:2},children:[e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:["Selected Items (",o.requested_items.length,")"]}),e.jsx(h,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:o.requested_items.map(t=>{const s=b.find(n=>n.id===t);return e.jsx(f,{label:s==null?void 0:s.name,size:"small",variant:"outlined",onDelete:()=>c(n=>({...n,requested_items:n.requested_items.filter(l=>l!==t)}))},t)})})]})]})]})]})}),e.jsxs(U,{sx:{p:3,gap:2},children:[e.jsx(g,{onClick:()=>m(!1),variant:"outlined",sx:{borderRadius:2,px:4},children:"Cancel"}),e.jsx(g,{variant:"contained",onClick:D,sx:{backgroundColor:"#0A3A6E",borderRadius:2,px:4,fontWeight:600,"&:hover":{backgroundColor:"#082A52"}},children:p!==null?"Save Changes":"Create Request"})]})]})]})}export{Ae as default};
