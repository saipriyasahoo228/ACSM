import{r as u,j as e,R as Q}from"./index-lQRenEQZ.js";import{s as X,t as M,u as Y,T as g,k as Z,B as D,C as _,a as N,b as B,c as h,d as i,e as $}from"./TableRow-DOrBXlsl.js";import{B as w}from"./Modal-B5kKy10H.js";import{A as ee}from"./Add-Benailh8.js";import{C as se}from"./CardContent-B105ua6l.js";import{I as R}from"./IconButton-T04wkc8J.js";import{E as ne}from"./ExpandLess-DZ7dPrMJ.js";import{E as ie}from"./ExpandMore-CUYkeq_0.js";import{E as re}from"./Edit-C-2-cLNF.js";import{D as te}from"./Delete-CGINWn67.js";import{C as oe}from"./Collapse-BxTKEx5z.js";import{L as ae,S as O,O as F}from"./Select-BG3pRAtK.js";import{l as b,g as le,M as f}from"./MenuItem-C9agow_O.js";import{D as de,a as me,b as ce,c as pe}from"./DialogTitle-BY4vkXbS.js";import{G as L}from"./Grid-DAMVHerN.js";import{F as H,I as G}from"./InputLabel-D6fBawzD.js";import{C as xe}from"./Checkbox-DKIuKd5p.js";import{c as he}from"./clsx-B-dksMZM.js";import{u as W}from"./ButtonBase-DbGEVCCx.js";import"./Transition-CaP-LOaf.js";import"./TransitionGroupContext-Cr6fGhL9.js";import"./index-BGy4LR6Y.js";import"./dividerClasses-HdBjWpbl.js";import"./isMuiElement-CkiPPDrS.js";import"./SwitchBase-D_N6ZnYA.js";const ue=o=>{const{classes:r,inset:a,primary:c,secondary:l,dense:p}=o;return Z({root:["root",a&&"inset",p&&"dense",c&&l&&"multiline"],primary:["primary"],secondary:["secondary"]},le,r)},ge=X("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:a}=o;return[{[`& .${b.primary}`]:r.primary},{[`& .${b.secondary}`]:r.secondary},r.root,a.inset&&r.inset,a.primary&&a.secondary&&r.multiline,a.dense&&r.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${M.root}:where(& .${b.primary})`]:{display:"block"},[`.${M.root}:where(& .${b.secondary})`]:{display:"block"},variants:[{props:({ownerState:o})=>o.primary&&o.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:o})=>o.inset,style:{paddingLeft:56}}]}),ye=u.forwardRef(function(r,a){const c=Y({props:r,name:"MuiListItemText"}),{children:l,className:p,disableTypography:x=!1,inset:I=!1,primary:C,primaryTypographyProps:E,secondary:y,secondaryTypographyProps:v,slots:A={},slotProps:P={},...k}=c,{dense:T}=u.useContext(ae);let s=C??l,n=y;const t={...c,disableTypography:x,inset:I,primary:!!s,secondary:!!n,dense:T},m=ue(t),d={slots:A,slotProps:{primary:E,secondary:v,...P}},[j,q]=W("root",{className:he(m.root,p),elementType:ge,externalForwardedProps:{...d,...k},ownerState:t,ref:a}),[K,S]=W("primary",{className:m.primary,elementType:g,externalForwardedProps:d,ownerState:t}),[V,J]=W("secondary",{className:m.secondary,elementType:g,externalForwardedProps:d,ownerState:t});return s!=null&&s.type!==g&&!x&&(s=e.jsx(K,{variant:T?"body2":"body1",component:S!=null&&S.variant?void 0:"span",...S,children:s})),n!=null&&n.type!==g&&!x&&(n=e.jsx(V,{variant:"body2",color:"textSecondary",...J,children:n})),e.jsxs(j,{...q,children:[s,n]})}),je={Pending:"#ed6c02",Present:"#0288d1",Completed:"#2e7d32"},z=[{id:1,name:"Electrical Safety",mode:"Offline"},{id:2,name:"OSHA Compliance",mode:"Online"},{id:3,name:"Advanced Plumbing",mode:"Offline"},{id:4,name:"Scaffolding Safety",mode:"Online"},{id:5,name:"Equipment Operation",mode:"Offline"}],U=[{id:"E001",name:"Ravi Kumar"},{id:"E002",name:"Amit Sharma"},{id:"E003",name:"Suresh Gupta"},{id:"E004",name:"Neha Singh"},{id:"E005",name:"Arjun Mehta"}],Ue=()=>{const[o,r]=u.useState([]),[a,c]=u.useState(!1),[l,p]=u.useState({trainingId:"",trainingTitle:"",mode:"",employees:[]}),[x,I]=u.useState({}),C=s=>{I(n=>({...n,[s]:!n[s]}))},E=()=>{p({trainingId:"",trainingTitle:"",mode:"",employees:[]}),c(!0)},y=()=>c(!1),v=s=>{const n=z.find(t=>t.id===s);p({...l,trainingId:n.id,trainingTitle:n.name,mode:n.mode})},A=s=>{const n=s.map(t=>{const m=U.find(d=>d.id===t);return{employeeId:m.id,employeeName:m.name,status:"Pending"}});p({...l,employees:n})},P=()=>{const s={id:o.length+1,...l};r(n=>[...n,s]),y()},k=(s,n,t)=>{r(m=>m.map(d=>d.trainingId===s?{...d,employees:d.employees.map(j=>j.employeeId===n?{...j,status:t}:j)}:d))},T=s=>{r(n=>n.filter(t=>t.id!==s))};return e.jsxs(D,{p:3,children:[e.jsxs(D,{display:"flex",justifyContent:"space-between",mb:3,children:[e.jsx(g,{variant:"h4",color:"primary",children:"Worker Training Assignments"}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(ee,{}),onClick:E,sx:{color:"#0E4C92"},children:"Assign Training"})]}),e.jsx(_,{sx:{borderLeft:"6px solid #082A52",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",borderRadius:2},children:e.jsx(se,{children:e.jsxs(N,{children:[e.jsx(B,{sx:{background:"#E3EAFD"},children:e.jsxs(h,{children:[e.jsx(i,{}),e.jsx(i,{children:"Training"}),e.jsx(i,{children:"Mode"}),e.jsx(i,{children:"Assigned Workers"}),e.jsx(i,{children:"Actions"})]})}),e.jsx($,{children:o.length>0?o.map(s=>e.jsxs(Q.Fragment,{children:[e.jsxs(h,{children:[e.jsx(i,{children:e.jsx(R,{onClick:()=>C(s.trainingId),children:x[s.trainingId]?e.jsx(ne,{}):e.jsx(ie,{})})}),e.jsx(i,{children:s.trainingTitle}),e.jsx(i,{children:s.mode}),e.jsx(i,{children:s.employees.length}),e.jsxs(i,{children:[e.jsx(R,{color:"primary",onClick:()=>handleEditAssignment(s.id),children:e.jsx(re,{})}),e.jsx(R,{color:"error",onClick:()=>T(s.id),children:e.jsx(te,{})})]})]}),e.jsx(h,{children:e.jsx(i,{colSpan:5,sx:{p:0,border:0,backgroundColor:"#fafafa"},children:e.jsx(oe,{in:x[s.trainingId],timeout:"auto",unmountOnExit:!0,children:e.jsxs(D,{m:2,children:[e.jsx(g,{variant:"subtitle1",children:"Assigned Workers"}),e.jsxs(N,{size:"small",children:[e.jsx(B,{children:e.jsxs(h,{children:[e.jsx(i,{children:"Employee ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx($,{children:s.employees.map(n=>e.jsxs(h,{children:[e.jsx(i,{children:n.employeeId}),e.jsx(i,{children:n.employeeName}),e.jsx(i,{children:e.jsxs(O,{size:"small",value:n.status,onChange:t=>k(s.trainingId,n.employeeId,t.target.value),sx:{backgroundColor:je[n.status],color:"white",borderRadius:1,"& .MuiSelect-icon":{color:"white"}},children:[e.jsx(f,{value:"Pending",children:"Pending"}),e.jsx(f,{value:"Present",children:"Present"}),e.jsx(f,{value:"Completed",children:"Completed"})]})})]},n.employeeId))})]})]})})})})]},s.id)):e.jsx(h,{children:e.jsx(i,{colSpan:5,align:"center",children:"No assignments yet"})})})]})})}),e.jsxs(de,{open:a,onClose:y,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:500,maxHeight:"90vh",p:3}},children:[e.jsx(me,{sx:{backgroundColor:"#0A3A6E",color:"white",fontWeight:600,py:3},children:"Assign Training"}),e.jsx(ce,{dividers:!0,children:e.jsxs(L,{container:!0,spacing:3,direction:"column",children:[e.jsx(L,{item:!0,xs:12,children:e.jsxs(H,{fullWidth:!0,children:[e.jsx(G,{children:"Select Training"}),e.jsx(O,{value:l.trainingId,onChange:s=>v(s.target.value),input:e.jsx(F,{label:"Select Training"}),children:z.map(s=>e.jsxs(f,{value:s.id,children:[s.name," (",s.mode,")"]},s.id))})]})}),e.jsx(L,{item:!0,xs:12,children:e.jsxs(H,{fullWidth:!0,children:[e.jsx(G,{children:"Select Employees"}),e.jsx(O,{multiple:!0,value:l.employees.map(s=>s.employeeId),onChange:s=>A(s.target.value),input:e.jsx(F,{label:"Select Employees"}),renderValue:()=>"",MenuProps:{PaperProps:{style:{maxHeight:300}}},children:U.map(s=>e.jsxs(f,{value:s.id,children:[e.jsx(xe,{checked:l.employees.some(n=>n.employeeId===s.id)}),e.jsx(ye,{primary:`${s.id} - ${s.name}`})]},s.id))})]})})]})}),e.jsxs(pe,{children:[e.jsx(w,{onClick:y,color:"error",variant:"outlined",children:"Cancel"}),e.jsx(w,{variant:"outlined",onClick:P,sx:{color:"#0E4C92"},children:"Save"})]})]})]})};export{Ue as default};
