import{r as c,j as e,R as G}from"./index-DeCPM1YT.js";import{B as u,T as A,C as z,a as S,b as I,c as a,d as i,e as T}from"./TableRow-Cd9L6edy.js";import{B as f}from"./Button-i0LS_vGv.js";import{A as $}from"./Add-C6u5IBut.js";import{C as q}from"./CardContent-DuW-pjc9.js";import{I as x}from"./IconButton-oK9S63L7.js";import{E as K}from"./ExpandLess-BUkRJSnp.js";import{E as V}from"./ExpandMore-BjBxeS2K.js";import{E as J}from"./Edit-DGiN9sfY.js";import{D as Q}from"./Delete-PXtfudQB.js";import{C as U}from"./Collapse-CI6k5Tak.js";import{S as C,O as v}from"./Select-B0BFEktc.js";import{M as o}from"./MenuItem-BBKtsJ_f.js";import{D as X,a as Y,b as Z,c as _}from"./DialogTitle-D5MRwTrG.js";import{C as ee}from"./Close-DenZmEgU.js";import{G as y}from"./Grid-DCJmtdp8.js";import{F as k,I as D}from"./InputLabel-uQorTdpH.js";import{C as ne}from"./Checkbox-B-amFoMf.js";import{L as se}from"./ListItemText-Cm-NOO1B.js";import"./clsx-B-dksMZM.js";import"./ButtonBase-Cikulz_k.js";import"./TransitionGroupContext-CNIvG2Vj.js";import"./Transition-B84HZYJ-.js";import"./index-DeXogL32.js";import"./Modal-CUDL2x5c.js";import"./dividerClasses-ifTG4Um1.js";import"./isMuiElement-DPWNH1dL.js";import"./SwitchBase-DtxWgrp7.js";const ie={Pending:"#ed6c02",Present:"#0288d1",Completed:"#2e7d32"},P=[{id:1,name:"Electrical Safety",mode:"Offline"},{id:2,name:"OSHA Compliance",mode:"Online"},{id:3,name:"Advanced Plumbing",mode:"Offline"},{id:4,name:"Scaffolding Safety",mode:"Online"},{id:5,name:"Equipment Operation",mode:"Offline"}],O=[{id:"E001",name:"Ravi Kumar"},{id:"E002",name:"Amit Sharma"},{id:"E003",name:"Suresh Gupta"},{id:"E004",name:"Neha Singh"},{id:"E005",name:"Arjun Mehta"}],we=()=>{const[h,p]=c.useState([]),[w,E]=c.useState(!1),[l,g]=c.useState({trainingId:"",trainingTitle:"",mode:"",employees:[]}),[b,R]=c.useState({}),W=n=>{R(s=>({...s,[n]:!s[n]}))},M=()=>{g({trainingId:"",trainingTitle:"",mode:"",employees:[]}),E(!0)},d=()=>E(!1),B=n=>{const s=P.find(t=>t.id===n);g({...l,trainingId:s.id,trainingTitle:s.name,mode:s.mode})},F=n=>{const s=n.map(t=>{const m=O.find(r=>r.id===t);return{employeeId:m.id,employeeName:m.name,status:"Pending"}});g({...l,employees:s})},H=()=>{const n={id:h.length+1,...l};p(s=>[...s,n]),d()},L=(n,s,t)=>{p(m=>m.map(r=>r.trainingId===n?{...r,employees:r.employees.map(j=>j.employeeId===s?{...j,status:t}:j)}:r))},N=n=>{p(s=>s.filter(t=>t.id!==n))};return e.jsxs(u,{p:3,children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",mb:3,children:[e.jsx(A,{variant:"h4",color:"primary",children:"Worker Training Assignments"}),e.jsx(f,{variant:"outlined",startIcon:e.jsx($,{}),onClick:M,sx:{color:"#0E4C92"},children:"Assign Training"})]}),e.jsx(z,{sx:{borderLeft:"6px solid #082A52",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",borderRadius:2},children:e.jsx(q,{children:e.jsxs(S,{children:[e.jsx(I,{sx:{background:"#E3EAFD"},children:e.jsxs(a,{children:[e.jsx(i,{}),e.jsx(i,{children:"Training"}),e.jsx(i,{children:"Mode"}),e.jsx(i,{children:"Assigned Workers"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(T,{children:h.length>0?h.map(n=>e.jsxs(G.Fragment,{children:[e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(x,{onClick:()=>W(n.trainingId),children:b[n.trainingId]?e.jsx(K,{}):e.jsx(V,{})})}),e.jsx(i,{children:n.trainingTitle}),e.jsx(i,{children:n.mode}),e.jsx(i,{children:n.employees.length}),e.jsxs(i,{children:[e.jsx(x,{color:"primary",onClick:()=>handleEditAssignment(n.id),children:e.jsx(J,{})}),e.jsx(x,{color:"error",onClick:()=>N(n.id),children:e.jsx(Q,{})})]})]}),e.jsx(a,{children:e.jsx(i,{colSpan:5,sx:{p:0,border:0,backgroundColor:"#fafafa"},children:e.jsx(U,{in:b[n.trainingId],timeout:"auto",unmountOnExit:!0,children:e.jsxs(u,{m:2,children:[e.jsx(A,{variant:"subtitle1",children:"Assigned Workers"}),e.jsxs(S,{size:"small",children:[e.jsx(I,{children:e.jsxs(a,{children:[e.jsx(i,{children:"Employee ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx(T,{children:n.employees.map(s=>e.jsxs(a,{children:[e.jsx(i,{children:s.employeeId}),e.jsx(i,{children:s.employeeName}),e.jsx(i,{children:e.jsxs(C,{size:"small",value:s.status,onChange:t=>L(n.trainingId,s.employeeId,t.target.value),sx:{backgroundColor:ie[s.status],color:"white",borderRadius:1,"& .MuiSelect-icon":{color:"white"}},children:[e.jsx(o,{value:"Pending",children:"Pending"}),e.jsx(o,{value:"Present",children:"Present"}),e.jsx(o,{value:"Completed",children:"Completed"})]})})]},s.employeeId))})]})]})})})})]},n.id)):e.jsx(a,{children:e.jsx(i,{colSpan:5,align:"center",children:"No assignments yet"})})})]})})}),e.jsxs(X,{open:w,onClose:d,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:500,maxHeight:"90vh",p:3}},children:[e.jsxs(Y,{sx:{backgroundColor:"#0A3A6E",color:"white",fontWeight:600,py:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Assign Training",e.jsx(x,{onClick:d,sx:{color:"#fff"},children:e.jsx(ee,{})})]}),e.jsx(Z,{dividers:!0,children:e.jsxs(y,{container:!0,spacing:3,direction:"column",children:[e.jsx(y,{item:!0,xs:12,children:e.jsxs(k,{fullWidth:!0,children:[e.jsx(D,{children:"Select Training"}),e.jsx(C,{value:l.trainingId,onChange:n=>B(n.target.value),input:e.jsx(v,{label:"Select Training"}),children:P.map(n=>e.jsxs(o,{value:n.id,children:[n.name," (",n.mode,")"]},n.id))})]})}),e.jsx(y,{item:!0,xs:12,children:e.jsxs(k,{fullWidth:!0,children:[e.jsx(D,{children:"Select Employees"}),e.jsx(C,{multiple:!0,value:l.employees.map(n=>n.employeeId),onChange:n=>F(n.target.value),input:e.jsx(v,{label:"Select Employees"}),renderValue:()=>"",MenuProps:{PaperProps:{style:{maxHeight:300}}},children:O.map(n=>e.jsxs(o,{value:n.id,children:[e.jsx(ne,{checked:l.employees.some(s=>s.employeeId===n.id)}),e.jsx(se,{primary:`${n.id} - ${n.name}`})]},n.id))})]})})]})}),e.jsxs(_,{children:[e.jsx(f,{onClick:d,color:"error",variant:"outlined",children:"Cancel"}),e.jsx(f,{variant:"outlined",onClick:H,sx:{color:"#0E4C92"},children:"Save"})]})]})]})};export{we as default};
