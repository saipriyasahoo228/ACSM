import{r as u,j as e,R as Q}from"./index-78vIXnNX.js";import{s as X,t as M,u as Y,T as g,l as Z,B as D,C as _,a as ee,b as N,c as B,d as h,e as i,f as $}from"./TableRow-Bh4s7eKd.js";import{u as w,B as R}from"./Modal-BRuT0w2r.js";import{A as se}from"./Add-B0X4t8Dt.js";import{I as O,D as ne}from"./Delete-De6SPuXf.js";import{E as ie}from"./ExpandLess-G7MIon59.js";import{E as te}from"./ExpandMore-DgNxwc4S.js";import{E as re}from"./Edit-BTYUVQFF.js";import{C as oe}from"./Collapse-DkXT2JO1.js";import{L as ae,S as L,O as F}from"./Select-BDRxS8K1.js";import{l as b,g as le,M as f}from"./MenuItem-EDr2Hmyh.js";import{D as de,a as ce,b as me,c as pe}from"./DialogTitle-Cr0WkrxD.js";import{G as W}from"./Grid-44nfcsyh.js";import{F as H,I as G}from"./InputLabel-D2cET7_l.js";import{C as xe}from"./Checkbox-CPetFkIL.js";import{c as he}from"./clsx-B-dksMZM.js";import"./Transition-DLvuwqKz.js";import"./index-Cf5oalkp.js";import"./isMuiElement-CcGzOGYR.js";import"./SwitchBase-Dc6i0zXX.js";const ue=o=>{const{classes:t,inset:a,primary:m,secondary:l,dense:p}=o;return Z({root:["root",a&&"inset",p&&"dense",m&&l&&"multiline"],primary:["primary"],secondary:["secondary"]},le,t)},ge=X("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:a}=o;return[{[`& .${b.primary}`]:t.primary},{[`& .${b.secondary}`]:t.secondary},t.root,a.inset&&t.inset,a.primary&&a.secondary&&t.multiline,a.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${M.root}:where(& .${b.primary})`]:{display:"block"},[`.${M.root}:where(& .${b.secondary})`]:{display:"block"},variants:[{props:({ownerState:o})=>o.primary&&o.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:o})=>o.inset,style:{paddingLeft:56}}]}),ye=u.forwardRef(function(t,a){const m=Y({props:t,name:"MuiListItemText"}),{children:l,className:p,disableTypography:x=!1,inset:I=!1,primary:C,primaryTypographyProps:E,secondary:y,secondaryTypographyProps:v,slots:A={},slotProps:P={},...k}=m,{dense:T}=u.useContext(ae);let s=C??l,n=y;const r={...m,disableTypography:x,inset:I,primary:!!s,secondary:!!n,dense:T},c=ue(r),d={slots:A,slotProps:{primary:E,secondary:v,...P}},[j,q]=w("root",{className:he(c.root,p),elementType:ge,externalForwardedProps:{...d,...k},ownerState:r,ref:a}),[K,S]=w("primary",{className:c.primary,elementType:g,externalForwardedProps:d,ownerState:r}),[V,J]=w("secondary",{className:c.secondary,elementType:g,externalForwardedProps:d,ownerState:r});return s!=null&&s.type!==g&&!x&&(s=e.jsx(K,{variant:T?"body2":"body1",component:S!=null&&S.variant?void 0:"span",...S,children:s})),n!=null&&n.type!==g&&!x&&(n=e.jsx(V,{variant:"body2",color:"textSecondary",...J,children:n})),e.jsxs(j,{...q,children:[s,n]})}),je={Pending:"#ed6c02",Present:"#0288d1",Completed:"#2e7d32"},z=[{id:1,name:"Electrical Safety",mode:"Offline"},{id:2,name:"OSHA Compliance",mode:"Online"},{id:3,name:"Advanced Plumbing",mode:"Offline"},{id:4,name:"Scaffolding Safety",mode:"Online"},{id:5,name:"Equipment Operation",mode:"Offline"}],U=[{id:"E001",name:"Ravi Kumar"},{id:"E002",name:"Amit Sharma"},{id:"E003",name:"Suresh Gupta"},{id:"E004",name:"Neha Singh"},{id:"E005",name:"Arjun Mehta"}],$e=()=>{const[o,t]=u.useState([]),[a,m]=u.useState(!1),[l,p]=u.useState({trainingId:"",trainingTitle:"",mode:"",employees:[]}),[x,I]=u.useState({}),C=s=>{I(n=>({...n,[s]:!n[s]}))},E=()=>{p({trainingId:"",trainingTitle:"",mode:"",employees:[]}),m(!0)},y=()=>m(!1),v=s=>{const n=z.find(r=>r.id===s);p({...l,trainingId:n.id,trainingTitle:n.name,mode:n.mode})},A=s=>{const n=s.map(r=>{const c=U.find(d=>d.id===r);return{employeeId:c.id,employeeName:c.name,status:"Pending"}});p({...l,employees:n})},P=()=>{const s={id:o.length+1,...l};t(n=>[...n,s]),y()},k=(s,n,r)=>{t(c=>c.map(d=>d.trainingId===s?{...d,employees:d.employees.map(j=>j.employeeId===n?{...j,status:r}:j)}:d))},T=s=>{t(n=>n.filter(r=>r.id!==s))};return e.jsxs(D,{p:3,children:[e.jsxs(D,{display:"flex",justifyContent:"space-between",mb:3,children:[e.jsx(g,{variant:"h4",color:"primary",children:"Worker Training Assignments"}),e.jsx(R,{variant:"outlined",startIcon:e.jsx(se,{}),onClick:E,sx:{color:"#0E4C92"},children:"Assign Training"})]}),e.jsx(_,{sx:{borderLeft:"6px solid #082A52",boxShadow:"0 6px 18px rgba(0,0,0,0.12)",borderRadius:2},children:e.jsx(ee,{children:e.jsxs(N,{children:[e.jsx(B,{sx:{background:"#E3EAFD"},children:e.jsxs(h,{children:[e.jsx(i,{}),e.jsx(i,{children:"Training"}),e.jsx(i,{children:"Mode"}),e.jsx(i,{children:"Assigned Workers"}),e.jsx(i,{children:"Actions"})]})}),e.jsx($,{children:o.length>0?o.map(s=>e.jsxs(Q.Fragment,{children:[e.jsxs(h,{children:[e.jsx(i,{children:e.jsx(O,{onClick:()=>C(s.trainingId),children:x[s.trainingId]?e.jsx(ie,{}):e.jsx(te,{})})}),e.jsx(i,{children:s.trainingTitle}),e.jsx(i,{children:s.mode}),e.jsx(i,{children:s.employees.length}),e.jsxs(i,{children:[e.jsx(O,{color:"primary",onClick:()=>handleEditAssignment(s.id),children:e.jsx(re,{})}),e.jsx(O,{color:"error",onClick:()=>T(s.id),children:e.jsx(ne,{})})]})]}),e.jsx(h,{children:e.jsx(i,{colSpan:5,sx:{p:0,border:0,backgroundColor:"#fafafa"},children:e.jsx(oe,{in:x[s.trainingId],timeout:"auto",unmountOnExit:!0,children:e.jsxs(D,{m:2,children:[e.jsx(g,{variant:"subtitle1",children:"Assigned Workers"}),e.jsxs(N,{size:"small",children:[e.jsx(B,{children:e.jsxs(h,{children:[e.jsx(i,{children:"Employee ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx($,{children:s.employees.map(n=>e.jsxs(h,{children:[e.jsx(i,{children:n.employeeId}),e.jsx(i,{children:n.employeeName}),e.jsx(i,{children:e.jsxs(L,{size:"small",value:n.status,onChange:r=>k(s.trainingId,n.employeeId,r.target.value),sx:{backgroundColor:je[n.status],color:"white",borderRadius:1,"& .MuiSelect-icon":{color:"white"}},children:[e.jsx(f,{value:"Pending",children:"Pending"}),e.jsx(f,{value:"Present",children:"Present"}),e.jsx(f,{value:"Completed",children:"Completed"})]})})]},n.employeeId))})]})]})})})})]},s.id)):e.jsx(h,{children:e.jsx(i,{colSpan:5,align:"center",children:"No assignments yet"})})})]})})}),e.jsxs(de,{open:a,onClose:y,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:500,maxHeight:"90vh",p:3}},children:[e.jsx(ce,{sx:{backgroundColor:"#0A3A6E",color:"white",fontWeight:600,py:3},children:"Assign Training"}),e.jsx(me,{dividers:!0,children:e.jsxs(W,{container:!0,spacing:3,direction:"column",children:[e.jsx(W,{item:!0,xs:12,children:e.jsxs(H,{fullWidth:!0,children:[e.jsx(G,{children:"Select Training"}),e.jsx(L,{value:l.trainingId,onChange:s=>v(s.target.value),input:e.jsx(F,{label:"Select Training"}),children:z.map(s=>e.jsxs(f,{value:s.id,children:[s.name," (",s.mode,")"]},s.id))})]})}),e.jsx(W,{item:!0,xs:12,children:e.jsxs(H,{fullWidth:!0,children:[e.jsx(G,{children:"Select Employees"}),e.jsx(L,{multiple:!0,value:l.employees.map(s=>s.employeeId),onChange:s=>A(s.target.value),input:e.jsx(F,{label:"Select Employees"}),renderValue:()=>"",MenuProps:{PaperProps:{style:{maxHeight:300}}},children:U.map(s=>e.jsxs(f,{value:s.id,children:[e.jsx(xe,{checked:l.employees.some(n=>n.employeeId===s.id)}),e.jsx(ye,{primary:`${s.id} - ${s.name}`})]},s.id))})]})})]})}),e.jsxs(pe,{children:[e.jsx(R,{onClick:y,color:"error",variant:"outlined",children:"Cancel"}),e.jsx(R,{variant:"outlined",onClick:P,sx:{color:"#0E4C92"},children:"Save"})]})]})]})};export{$e as default};
